<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<title>Theory Run (Isabelle2017: October 2017)</title>
<link media="all" rel="stylesheet" type="text/css" href="isabelle.css"/>
</head>

<body>
<div class="head"><h1>Theory Run</h1>

<span class="command">theory</span> <span class="name">Run</span><br/>
<span class="keyword">imports</span> <a href="TESL.html"><span class="name">TESL</span></a><br/>

</div>
<div class="source">
<pre class="source"><span class="keyword1"><span class="command">theory</span></span><span class=""> </span><span class="">Run</span><span class="">
</span><span class="keyword2"><span class="keyword">imports</span></span><span class="">
</span><span class="">    </span><span class="string">&quot;TESL&quot;</span><span class="">
</span><span class="">      
</span><span class="keyword2"><span class="keyword">begin</span></span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command">section</span></span><span class=""> </span><span class="cartouche">&#8249; Defining runs &#8250;</span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command">abbreviation</span></span><span class=""> </span><span class="">hamlet</span><span class=""> </span><span class="keyword2"><span class="keyword">where</span></span><span class=""> </span><span class="string">&quot;hamlet &#8801; fst&quot;</span><span class="">
</span><span class="keyword1"><span class="command">abbreviation</span></span><span class=""> </span><span class="">time</span><span class=""> </span><span class="keyword2"><span class="keyword">where</span></span><span class=""> </span><span class="string">&quot;time &#8801; snd&quot;</span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command">type_synonym</span></span><span class=""> </span><span class="">instant</span><span class=""> </span><span class="delimiter">=</span><span class=""> </span><span class="string">&quot;clock &#8658; (bool &#215; tag_const)&quot;</span><span class="">
</span><span class="keyword1"><span class="command">typedef</span></span><span class=""> </span><span class="delimiter">(</span><span class="keyword2"><span class="keyword">overloaded</span></span><span class="delimiter">)</span><span class=""> </span><span class="">run</span><span class=""> </span><span class="delimiter">=</span><span class="">
</span><span class="">  </span><span class="string">&quot;{ &#961;::nat &#8658; instant. &#8704;c. mono (&#955;n. time (&#961; n c)) }&quot;</span><span class="">
</span><span class="keyword1"><span class="command">proof</span></span><span class="">
</span><span class="">  </span><span class="keyword3"><span class="command">show</span></span><span class=""> </span><span class="string">&quot;(&#955;_ _. (undefined, &#964;<span class="hidden">&#8681;</span><sub>r</sub><span class="hidden">&#8681;</span><sub>a</sub><span class="hidden">&#8681;</span><sub>t</sub> 0)) &#8712; {&#961;::nat &#8658; clock &#8658; bool &#215; tag_const. &#8704;c::clock. mono (&#955;n::nat. time (&#961; n c))}&quot;</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">mono_def</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">auto</span><span class="">
</span><span class="keyword1"><span class="command">qed</span></span><span class="">
</span><span class="comment">(*
abbreviation Abs_run_not (&quot;_<span class="hidden">&#8679;</span><sup>&#8593;</sup>&quot; 1000) where &quot;f<span class="hidden">&#8679;</span><sup>&#8593;</sup> &#8801; Abs_run f&quot;
abbreviation Rep_run_not (&quot;_<span class="hidden">&#8679;</span><sup>&#8595;</sup>&quot; 1000) where &quot;f<span class="hidden">&#8679;</span><sup>&#8595;</sup> &#8801; Rep_run f&quot;
*)</span><span class="">
</span><span class="keyword1"><span class="command">lemma</span></span><span class=""> </span><span class="">Abs_run_inverse_rewrite</span><span class="delimiter">:</span><span class="">
</span><span class="">  </span><span class="string">&quot;&#8704;c. mono (&#955;n. time (&#961; n c)) &#10233; Rep_run (Abs_run &#961;) = &#961;&quot;</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class=""> </span><span class="">Abs_run_inverse</span><span class="delimiter">)</span><span class="">
</span><span class="">
</span><span class="comment">(* WARNING: Admitting monotonicity to compute faster. Use for debugging purposes only. *)</span><span class="">
</span><span class="keyword1"><span class="command">lemma</span></span><span class=""> </span><span class="">Abs_run_inverse_rewrite_unsafe</span><span class="delimiter">:</span><span class="">
</span><span class="">  </span><span class="string">&quot;Rep_run (Abs_run &#961;) = &#961;&quot;</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">oops</span></span><span class=""> </span><span class="comment">(* Use [sorry] when testing *)</span><span class="">
</span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command">fun</span></span><span class=""> </span><span class="">symbolic_run_interpretation_primitive</span><span class=""> </span><span class="delimiter">::</span><span class=""> </span><span class="string">&quot;constr &#8658; run set&quot;</span><span class=""> </span><span class="delimiter">(</span><span class="string">&quot;&#10214; _ &#10215;<span class="hidden">&#8681;</span><sub>s</sub><span class="hidden">&#8681;</span><sub>y</sub><span class="hidden">&#8681;</span><sub>m</sub><span class="hidden">&#8681;</span><sub>r</sub><span class="hidden">&#8681;</span><sub>u</sub><span class="hidden">&#8681;</span><sub>n</sub>&quot;</span><span class="delimiter">)</span><span class=""> </span><span class="keyword2"><span class="keyword">where</span></span><span class="">
</span><span class="">    </span><span class="string">&quot;&#10214; K &#8657; n  &#10215;<span class="hidden">&#8681;</span><sub>s</sub><span class="hidden">&#8681;</span><sub>y</sub><span class="hidden">&#8681;</span><sub>m</sub><span class="hidden">&#8681;</span><sub>r</sub><span class="hidden">&#8681;</span><sub>u</sub><span class="hidden">&#8681;</span><sub>n</sub>   = { &#961;. hamlet ((Rep_run &#961;) n K) = True }&quot;</span><span class="">
</span><span class="">  </span><span class="delimiter">|</span><span class=""> </span><span class="string">&quot;&#10214; K &#172;&#8657; n &#10215;<span class="hidden">&#8681;</span><sub>s</sub><span class="hidden">&#8681;</span><sub>y</sub><span class="hidden">&#8681;</span><sub>m</sub><span class="hidden">&#8681;</span><sub>r</sub><span class="hidden">&#8681;</span><sub>u</sub><span class="hidden">&#8681;</span><sub>n</sub>   = { &#961;. hamlet ((Rep_run &#961;) n K) = False }&quot;</span><span class="">
</span><span class="">  </span><span class="delimiter">|</span><span class=""> </span><span class="string">&quot;&#10214; K &#8659; n @ &#8970; &#964; &#8971; &#10215;<span class="hidden">&#8681;</span><sub>s</sub><span class="hidden">&#8681;</span><sub>y</sub><span class="hidden">&#8681;</span><sub>m</sub><span class="hidden">&#8681;</span><sub>r</sub><span class="hidden">&#8681;</span><sub>u</sub><span class="hidden">&#8681;</span><sub>n</sub> = { &#961;. time ((Rep_run &#961;) n K) = &#964; }&quot;</span><span class="">
</span><span class="">  </span><span class="delimiter">|</span><span class=""> </span><span class="string">&quot;&#10214; K &#8659; n @ &#8970; &#964;<span class="hidden">&#8681;</span><sub>v</sub><span class="hidden">&#8681;</span><sub>a</sub><span class="hidden">&#8681;</span><sub>r</sub>(K&#39;, n&#39;) &#8853; &#964; &#8971; &#10215;<span class="hidden">&#8681;</span><sub>s</sub><span class="hidden">&#8681;</span><sub>y</sub><span class="hidden">&#8681;</span><sub>m</sub><span class="hidden">&#8681;</span><sub>r</sub><span class="hidden">&#8681;</span><sub>u</sub><span class="hidden">&#8681;</span><sub>n</sub> = { &#961;. time ((Rep_run &#961;) n K) = time ((Rep_run &#961;) n&#39; K&#39;) + &#964; }&quot;</span><span class="">
</span><span class="">  </span><span class="delimiter">|</span><span class=""> </span><span class="string">&quot;&#10214; &#964;<span class="hidden">&#8681;</span><sub>v</sub><span class="hidden">&#8681;</span><sub>a</sub><span class="hidden">&#8681;</span><sub>r</sub>(K<span class="hidden">&#8681;</span><sub>1</sub>, n<span class="hidden">&#8681;</span><sub>1</sub>) &#8784; &#945; * &#964;<span class="hidden">&#8681;</span><sub>v</sub><span class="hidden">&#8681;</span><sub>a</sub><span class="hidden">&#8681;</span><sub>r</sub>(K<span class="hidden">&#8681;</span><sub>2</sub>, n<span class="hidden">&#8681;</span><sub>2</sub>) + &#946; &#10215;<span class="hidden">&#8681;</span><sub>s</sub><span class="hidden">&#8681;</span><sub>y</sub><span class="hidden">&#8681;</span><sub>m</sub><span class="hidden">&#8681;</span><sub>r</sub><span class="hidden">&#8681;</span><sub>u</sub><span class="hidden">&#8681;</span><sub>n</sub> = { &#961;. time ((Rep_run &#961;) n<span class="hidden">&#8681;</span><sub>1</sub> K<span class="hidden">&#8681;</span><sub>1</sub>) = &#945; * time ((Rep_run &#961;) n<span class="hidden">&#8681;</span><sub>2</sub> K<span class="hidden">&#8681;</span><sub>2</sub>) + &#946; }&quot;</span><span class="">
</span><span class="">  </span><span class="delimiter">|</span><span class=""> </span><span class="string">&quot;&#10214; &#10216;&#964;<span class="hidden">&#8681;</span><sub>v</sub><span class="hidden">&#8681;</span><sub>a</sub><span class="hidden">&#8681;</span><sub>r</sub>(K<span class="hidden">&#8681;</span><sub>1</sub>, n<span class="hidden">&#8681;</span><sub>1</sub>), &#964;<span class="hidden">&#8681;</span><sub>v</sub><span class="hidden">&#8681;</span><sub>a</sub><span class="hidden">&#8681;</span><sub>r</sub>(K<span class="hidden">&#8681;</span><sub>2</sub>, n<span class="hidden">&#8681;</span><sub>2</sub>)&#10217; &#949; R &#10215;<span class="hidden">&#8681;</span><sub>s</sub><span class="hidden">&#8681;</span><sub>y</sub><span class="hidden">&#8681;</span><sub>m</sub><span class="hidden">&#8681;</span><sub>r</sub><span class="hidden">&#8681;</span><sub>u</sub><span class="hidden">&#8681;</span><sub>n</sub> = { &#961;. R (time ((Rep_run &#961;) n<span class="hidden">&#8681;</span><sub>1</sub> K<span class="hidden">&#8681;</span><sub>1</sub>), time ((Rep_run &#961;) n<span class="hidden">&#8681;</span><sub>2</sub> K<span class="hidden">&#8681;</span><sub>2</sub>)) }&quot;</span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command">fun</span></span><span class=""> </span><span class="">symbolic_run_interpretation</span><span class=""> </span><span class="delimiter">::</span><span class=""> </span><span class="string">&quot;constr list &#8658; run set&quot;</span><span class=""> </span><span class="delimiter">(</span><span class="string">&quot;&#10214;&#10214; _ &#10215;&#10215;<span class="hidden">&#8681;</span><sub>s</sub><span class="hidden">&#8681;</span><sub>y</sub><span class="hidden">&#8681;</span><sub>m</sub><span class="hidden">&#8681;</span><sub>r</sub><span class="hidden">&#8681;</span><sub>u</sub><span class="hidden">&#8681;</span><sub>n</sub>&quot;</span><span class="delimiter">)</span><span class=""> </span><span class="keyword2"><span class="keyword">where</span></span><span class="">
</span><span class="">    </span><span class="string">&quot;&#10214;&#10214; [] &#10215;&#10215;<span class="hidden">&#8681;</span><sub>s</sub><span class="hidden">&#8681;</span><sub>y</sub><span class="hidden">&#8681;</span><sub>m</sub><span class="hidden">&#8681;</span><sub>r</sub><span class="hidden">&#8681;</span><sub>u</sub><span class="hidden">&#8681;</span><sub>n</sub> = { _. True }&quot;</span><span class="">
</span><span class="">  </span><span class="delimiter">|</span><span class=""> </span><span class="string">&quot;&#10214;&#10214; &#947; # &#915; &#10215;&#10215;<span class="hidden">&#8681;</span><sub>s</sub><span class="hidden">&#8681;</span><sub>y</sub><span class="hidden">&#8681;</span><sub>m</sub><span class="hidden">&#8681;</span><sub>r</sub><span class="hidden">&#8681;</span><sub>u</sub><span class="hidden">&#8681;</span><sub>n</sub> = &#10214; &#947; &#10215;<span class="hidden">&#8681;</span><sub>s</sub><span class="hidden">&#8681;</span><sub>y</sub><span class="hidden">&#8681;</span><sub>m</sub><span class="hidden">&#8681;</span><sub>r</sub><span class="hidden">&#8681;</span><sub>u</sub><span class="hidden">&#8681;</span><sub>n</sub> &#8745; &#10214;&#10214; &#915; &#10215;&#10215;<span class="hidden">&#8681;</span><sub>s</sub><span class="hidden">&#8681;</span><sub>y</sub><span class="hidden">&#8681;</span><sub>m</sub><span class="hidden">&#8681;</span><sub>r</sub><span class="hidden">&#8681;</span><sub>u</sub><span class="hidden">&#8681;</span><sub>n</sub>&quot;</span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command">lemma</span></span><span class=""> </span><span class="">symbolic_run_interp_cons_morph</span><span class="delimiter">:</span><span class="">
</span><span class="">  </span><span class="string">&quot;&#10214; &#947; &#10215;<span class="hidden">&#8681;</span><sub>s</sub><span class="hidden">&#8681;</span><sub>y</sub><span class="hidden">&#8681;</span><sub>m</sub><span class="hidden">&#8681;</span><sub>r</sub><span class="hidden">&#8681;</span><sub>u</sub><span class="hidden">&#8681;</span><sub>n</sub> &#8745; &#10214;&#10214; &#915; &#10215;&#10215;<span class="hidden">&#8681;</span><sub>s</sub><span class="hidden">&#8681;</span><sub>y</sub><span class="hidden">&#8681;</span><sub>m</sub><span class="hidden">&#8681;</span><sub>r</sub><span class="hidden">&#8681;</span><sub>u</sub><span class="hidden">&#8681;</span><sub>n</sub> = &#10214;&#10214; &#947; # &#915; &#10215;&#10215;<span class="hidden">&#8681;</span><sub>s</sub><span class="hidden">&#8681;</span><sub>y</sub><span class="hidden">&#8681;</span><sub>m</sub><span class="hidden">&#8681;</span><sub>r</sub><span class="hidden">&#8681;</span><sub>u</sub><span class="hidden">&#8681;</span><sub>n</sub>&quot;</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">auto</span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command">definition</span></span><span class=""> </span><span class="">consistent_run</span><span class=""> </span><span class="delimiter">::</span><span class=""> </span><span class="string">&quot;constr list &#8658; bool&quot;</span><span class=""> </span><span class="keyword2"><span class="keyword">where</span></span><span class=""> 
</span><span class="">  </span><span class="string">&quot;consistent_run &#915; &#8801; &#8707;&#961;. &#961; &#8712; &#10214;&#10214; &#915; &#10215;&#10215;<span class="hidden">&#8681;</span><sub>s</sub><span class="hidden">&#8681;</span><sub>y</sub><span class="hidden">&#8681;</span><sub>m</sub><span class="hidden">&#8681;</span><sub>r</sub><span class="hidden">&#8681;</span><sub>u</sub><span class="hidden">&#8681;</span><sub>n</sub>&quot;</span><span class="">
</span><span class="">
</span><span class="comment">(**)</span><span class=""> </span><span class="keyword1"><span class="command">section</span></span><span class=""> </span><span class="cartouche">&#8249;Defining a method for witness construction&#8250;</span><span class=""> </span><span class="comment">(**)</span><span class="">
</span><span class="">
</span><span class="comment">(* Initial states *)</span><span class="">
</span><span class="keyword1"><span class="command">abbreviation</span></span><span class=""> </span><span class="">initial_run</span><span class=""> </span><span class="delimiter">::</span><span class=""> </span><span class="string">&quot;run&quot;</span><span class=""> </span><span class="delimiter">(</span><span class="string">&quot;&#961;<span class="hidden">&#8681;</span><sub>&#8857;</sub>&quot;</span><span class="delimiter">)</span><span class=""> </span><span class="keyword2"><span class="keyword">where</span></span><span class="">
</span><span class="">  </span><span class="string">&quot;&#961;<span class="hidden">&#8681;</span><sub>&#8857;</sub> &#8801; Abs_run ((&#955;_ _. (undefined, &#964;<span class="hidden">&#8681;</span><sub>r</sub><span class="hidden">&#8681;</span><sub>a</sub><span class="hidden">&#8681;</span><sub>t</sub> 0)) ::nat &#8658; clock &#8658; (bool &#215; tag_const))&quot;</span><span class="">
</span><span class="">
</span><span class="comment">(* To ensure monotonicity, time tag is set at a specific instant and forever after (stuttering) *)</span><span class="">
</span><span class="keyword1"><span class="command">fun</span></span><span class=""> </span><span class="">time_update</span><span class="">
</span><span class="">  </span><span class="delimiter">::</span><span class=""> </span><span class="string">&quot;nat &#8658; clock &#8658; tag_const &#8658; (nat &#8658; clock &#8658; (bool &#215; tag_const)) &#8658; (nat &#8658; clock &#8658; (bool &#215; tag_const))&quot;</span><span class=""> </span><span class="keyword2"><span class="keyword">where</span></span><span class="">
</span><span class="">    </span><span class="string">&quot;time_update n K &#964; &#961; = (&#955;n&#39; K&#39;. if K = K&#39; &#8743; n &#8804; n&#39; then (hamlet (&#961; n K), &#964;) else &#961; n&#39; K&#39;)&quot;</span><span class="">
</span><span class="">
</span><span class="comment">(* Update functionals *)</span><span class="">
</span><span class="keyword1"><span class="command">fun</span></span><span class=""> </span><span class="">run_update</span><span class=""> </span><span class="delimiter">::</span><span class=""> </span><span class="string">&quot;run &#8658; constr &#8658; run&quot;</span><span class=""> </span><span class="delimiter">(</span><span class="string">&quot;_ &#10216; _ &#10217;&quot;</span><span class="delimiter">)</span><span class=""> </span><span class="keyword2"><span class="keyword">where</span></span><span class="">
</span><span class="">    </span><span class="string">&quot;&#961; &#10216; K &#8657; n &#10217;  = Abs_run (&#955;n&#39; K&#39;. if K = K&#39; &#8743; n = n&#39; then (True, time ((Rep_run &#961;) n K)) else (Rep_run &#961;) n&#39; K&#39;)&quot;</span><span class="">
</span><span class="">  </span><span class="delimiter">|</span><span class=""> </span><span class="string">&quot;&#961; &#10216; K &#172;&#8657; n &#10217; = Abs_run (&#955;n&#39; K&#39;. if K = K&#39; &#8743; n = n&#39; then (False, time ((Rep_run &#961;) n K)) else (Rep_run &#961;) n&#39; K&#39;)&quot;</span><span class="">
</span><span class="">  </span><span class="delimiter">|</span><span class=""> </span><span class="string">&quot;&#961; &#10216; K &#8659; n @ &#8970; &#964; &#8971; &#10217; = Abs_run (time_update n K &#964; (Rep_run &#961;))&quot;</span><span class="">
</span><span class="">  </span><span class="delimiter">|</span><span class=""> </span><span class="string">&quot;&#961; &#10216; K &#8659; n @ &#8970; &#964;<span class="hidden">&#8681;</span><sub>v</sub><span class="hidden">&#8681;</span><sub>a</sub><span class="hidden">&#8681;</span><sub>r</sub>(K&#39;, n&#39;) &#8853; &#964; &#8971; &#10217; =
     Abs_run (time_update n K (time ((Rep_run &#961;) n&#39; K&#39;) + &#964;) (Rep_run &#961;))&quot;</span><span class="">
</span><span class="">  </span><span class="delimiter">|</span><span class=""> </span><span class="string">&quot;&#961; &#10216; &#964;<span class="hidden">&#8681;</span><sub>v</sub><span class="hidden">&#8681;</span><sub>a</sub><span class="hidden">&#8681;</span><sub>r</sub>(K<span class="hidden">&#8681;</span><sub>1</sub>, n<span class="hidden">&#8681;</span><sub>1</sub>) &#8784; &#945; * &#964;<span class="hidden">&#8681;</span><sub>v</sub><span class="hidden">&#8681;</span><sub>a</sub><span class="hidden">&#8681;</span><sub>r</sub>(K<span class="hidden">&#8681;</span><sub>2</sub>, n<span class="hidden">&#8681;</span><sub>2</sub>) + &#946; &#10217; =
     Abs_run (if time ((Rep_run &#961;) n<span class="hidden">&#8681;</span><sub>1</sub> K<span class="hidden">&#8681;</span><sub>1</sub>) = &#964;<span class="hidden">&#8681;</span><sub>r</sub><span class="hidden">&#8681;</span><sub>a</sub><span class="hidden">&#8681;</span><sub>t</sub> 0 &#8743; time ((Rep_run &#961;) n<span class="hidden">&#8681;</span><sub>2</sub> K<span class="hidden">&#8681;</span><sub>2</sub>) &#8800; &#964;<span class="hidden">&#8681;</span><sub>r</sub><span class="hidden">&#8681;</span><sub>a</sub><span class="hidden">&#8681;</span><sub>t</sub> 0
      then (time_update n<span class="hidden">&#8681;</span><sub>1</sub> K<span class="hidden">&#8681;</span><sub>1</sub> (&#945; * time ((Rep_run &#961;) n<span class="hidden">&#8681;</span><sub>2</sub> K<span class="hidden">&#8681;</span><sub>2</sub>) + &#946;) (Rep_run &#961;))
      else if time ((Rep_run &#961;) n<span class="hidden">&#8681;</span><sub>2</sub> K<span class="hidden">&#8681;</span><sub>2</sub>) = &#964;<span class="hidden">&#8681;</span><sub>r</sub><span class="hidden">&#8681;</span><sub>a</sub><span class="hidden">&#8681;</span><sub>t</sub> 0 &#8743; time ((Rep_run &#961;) n<span class="hidden">&#8681;</span><sub>1</sub> K<span class="hidden">&#8681;</span><sub>1</sub>) &#8800; &#964;<span class="hidden">&#8681;</span><sub>r</sub><span class="hidden">&#8681;</span><sub>a</sub><span class="hidden">&#8681;</span><sub>t</sub> 0
           then time_update n<span class="hidden">&#8681;</span><sub>2</sub> K<span class="hidden">&#8681;</span><sub>2</sub> ((time ((Rep_run &#961;) n<span class="hidden">&#8681;</span><sub>1</sub> K<span class="hidden">&#8681;</span><sub>1</sub>) - &#946;) / &#945;) (Rep_run &#961;)
           else (Rep_run &#961;) 
     )&quot;</span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command">fun</span></span><span class=""> </span><span class="">run_update&#39;</span><span class=""> </span><span class="delimiter">::</span><span class=""> </span><span class="string">&quot;constr list &#8658; run&quot;</span><span class=""> </span><span class="delimiter">(</span><span class="string">&quot;&#10216;&#10216; _ &#10217;&#10217;&quot;</span><span class="delimiter">)</span><span class=""> </span><span class="keyword2"><span class="keyword">where</span></span><span class="">
</span><span class="">    </span><span class="string">&quot;&#10216;&#10216; [] &#10217;&#10217;    = &#961;<span class="hidden">&#8681;</span><sub>&#8857;</sub>&quot;</span><span class="">
</span><span class="">  </span><span class="delimiter">|</span><span class=""> </span><span class="string">&quot;&#10216;&#10216; &#947; # &#915; &#10217;&#10217; = &#10216;&#10216; &#915; &#10217;&#10217; &#10216; &#947; &#10217;&quot;</span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command">lemma</span></span><span class=""> </span><span class="">witness_consistency</span><span class="delimiter">:</span><span class="">
</span><span class="">  </span><span class="string">&quot;&#10216;&#10216; &#915; &#10217;&#10217; &#8712; &#10214;&#10214; &#915; &#10215;&#10215;<span class="hidden">&#8681;</span><sub>s</sub><span class="hidden">&#8681;</span><sub>y</sub><span class="hidden">&#8681;</span><sub>m</sub><span class="hidden">&#8681;</span><sub>r</sub><span class="hidden">&#8681;</span><sub>u</sub><span class="hidden">&#8681;</span><sub>n</sub> &#10233; consistent_run &#915;&quot;</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">unfolding</span></span><span class=""> </span><span class="">consistent_run_def</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">exI</span><span class="delimiter">,</span><span class=""> </span><span class="">auto</span><span class="delimiter">)</span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command">lemma</span></span><span class=""> </span><span class="">witness_consistency&#39;</span><span class="delimiter">:</span><span class="">
</span><span class="">  </span><span class="string">&quot;consistent_run &#915; &#10233; &#10216;&#10216; &#915; &#10217;&#10217; &#8712; &#10214;&#10214; &#915; &#10215;&#10215;<span class="hidden">&#8681;</span><sub>s</sub><span class="hidden">&#8681;</span><sub>y</sub><span class="hidden">&#8681;</span><sub>m</sub><span class="hidden">&#8681;</span><sub>r</sub><span class="hidden">&#8681;</span><sub>u</sub><span class="hidden">&#8681;</span><sub>n</sub>&quot;</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">oops</span></span><span class=""> </span><span class="comment">(* Not sure the idea is true *)</span><span class="">
</span><span class="">
</span><span class="comment">(**)</span><span class=""> </span><span class="keyword1"><span class="command">section</span></span><span class=""> </span><span class="cartouche">&#8249;Rules and properties of consistence&#8250;</span><span class=""> </span><span class="comment">(**)</span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command">lemma</span></span><span class=""> </span><span class="">context_consistency_preservationI</span><span class="delimiter">:</span><span class="">
</span><span class="">  </span><span class="string">&quot;consistent_run (&#947; # &#915;) &#10233; consistent_run &#915;&quot;</span><span class="">
</span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">consistent_run_def</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">auto</span><span class="">
</span><span class="">
</span><span class="comment">(* This is very restrictive *)</span><span class="">
</span><span class="keyword1"><span class="command">inductive</span></span><span class=""> </span><span class="">context_independency</span><span class=""> </span><span class="delimiter">::</span><span class=""> </span><span class="string">&quot;constr &#8658; constr list &#8658; bool&quot;</span><span class=""> </span><span class="delimiter">(</span><span class="string">&quot;_ &#10781; _&quot;</span><span class="delimiter">)</span><span class=""> </span><span class="keyword2"><span class="keyword">where</span></span><span class="">
</span><span class="">  </span><span class="">NotTicks_independency</span><span class="delimiter">:</span><span class="">
</span><span class="">  </span><span class="string">&quot;K &#8657; n &#8713; set &#915; &#10233; K &#172;&#8657; n &#10781; &#915;&quot;</span><span class="">
</span><span class="delimiter">|</span><span class=""> </span><span class="">Ticks_independency</span><span class="delimiter">:</span><span class="">
</span><span class="">  </span><span class="string">&quot;K &#172;&#8657; n &#8713; set &#915; &#10233; K &#8657; n &#10781; &#915;&quot;</span><span class="">
</span><span class="delimiter">|</span><span class=""> </span><span class="">Timestamp_independency</span><span class="delimiter">:</span><span class="">
</span><span class="">  </span><span class="string">&quot;(&#8708;&#964;&#39;. &#964;&#39; = &#964; &#8743; K &#8659; n @ &#964; &#8712; set &#915;) &#10233; K &#8659; n @ &#964; &#10781; &#915;&quot;</span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command">thm</span></span><span class=""> </span><span class="">context_independency.induct</span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command">lemma</span></span><span class=""> </span><span class="">context_consistency_preservationE</span><span class="delimiter">:</span><span class="">
</span><span class="">  </span><span class="keyword2"><span class="keyword">assumes</span></span><span class=""> </span><span class="">consist</span><span class="delimiter">:</span><span class=""> </span><span class="string">&quot;consistent_run &#915;&quot;</span><span class="">
</span><span class="">  </span><span class="keyword2"><span class="keyword">and</span></span><span class="">     </span><span class="">indepen</span><span class="delimiter">:</span><span class=""> </span><span class="string">&quot;&#947; &#10781; &#915;&quot;</span><span class="">
</span><span class="">  </span><span class="keyword2"><span class="keyword">shows</span></span><span class=""> </span><span class="string">&quot;consistent_run (&#947; # &#915;)&quot;</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">oops</span></span><span class="">
</span><span class="">
</span><span class="comment">(**)</span><span class=""> </span><span class="keyword1"><span class="command">section</span></span><span class=""> </span><span class="cartouche">&#8249;Fixpoint lemma&#8250;</span><span class=""> </span><span class="comment">(**)</span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command">theorem</span></span><span class=""> </span><span class="">symrun_interp_fixpoint</span><span class="delimiter">:</span><span class="">
</span><span class="">  </span><span class="string">&quot;&#8898; ((&#955;&#947;. &#10214; &#947; &#10215;<span class="hidden">&#8681;</span><sub>s</sub><span class="hidden">&#8681;</span><sub>y</sub><span class="hidden">&#8681;</span><sub>m</sub><span class="hidden">&#8681;</span><sub>r</sub><span class="hidden">&#8681;</span><sub>u</sub><span class="hidden">&#8681;</span><sub>n</sub>) ` set &#915;) = &#10214;&#10214; &#915; &#10215;&#10215;<span class="hidden">&#8681;</span><sub>s</sub><span class="hidden">&#8681;</span><sub>y</sub><span class="hidden">&#8681;</span><sub>m</sub><span class="hidden">&#8681;</span><sub>r</sub><span class="hidden">&#8681;</span><sub>u</sub><span class="hidden">&#8681;</span><sub>n</sub>&quot;</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">proof</span></span><span class=""> </span><span class="delimiter">(</span><span class="">induct</span><span class=""> </span><span class="">&#915;</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword3"><span class="command">case</span></span><span class=""> </span><span class="">Nil</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command">then</span></span><span class=""> </span><span class="keyword3"><span class="command">show</span></span><span class=""> </span><span class="var">?case</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">next</span></span><span class="">
</span><span class="">    </span><span class="keyword3"><span class="command">case</span></span><span class=""> </span><span class="delimiter">(</span><span class="">Cons</span><span class=""> </span><span class="">a</span><span class=""> </span><span class="">&#915;</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command">then</span></span><span class=""> </span><span class="keyword3"><span class="command">show</span></span><span class=""> </span><span class="var">?case</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">auto</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">qed</span></span><span class="">
</span><span class="">
</span><span class="comment">(**)</span><span class=""> </span><span class="keyword1"><span class="command">section</span></span><span class=""> </span><span class="cartouche">&#8249;Expansion law&#8250;</span><span class=""> </span><span class="comment">(**)</span><span class="">
</span><span class="keyword1"><span class="command">text</span></span><span class=""> </span><span class="cartouche">&#8249;Similar to the expansion laws of lattices&#8250;</span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command">theorem</span></span><span class=""> </span><span class="">symrun_interp_expansion</span><span class="delimiter">:</span><span class="">
</span><span class="">  </span><span class="keyword2"><span class="keyword">shows</span></span><span class=""> </span><span class="string">&quot;&#10214;&#10214; &#915;<span class="hidden">&#8681;</span><sub>1</sub> @ &#915;<span class="hidden">&#8681;</span><sub>2</sub> &#10215;&#10215;<span class="hidden">&#8681;</span><sub>s</sub><span class="hidden">&#8681;</span><sub>y</sub><span class="hidden">&#8681;</span><sub>m</sub><span class="hidden">&#8681;</span><sub>r</sub><span class="hidden">&#8681;</span><sub>u</sub><span class="hidden">&#8681;</span><sub>n</sub> = &#10214;&#10214; &#915;<span class="hidden">&#8681;</span><sub>1</sub> &#10215;&#10215;<span class="hidden">&#8681;</span><sub>s</sub><span class="hidden">&#8681;</span><sub>y</sub><span class="hidden">&#8681;</span><sub>m</sub><span class="hidden">&#8681;</span><sub>r</sub><span class="hidden">&#8681;</span><sub>u</sub><span class="hidden">&#8681;</span><sub>n</sub> &#8745; &#10214;&#10214; &#915;<span class="hidden">&#8681;</span><sub>2</sub> &#10215;&#10215;<span class="hidden">&#8681;</span><sub>s</sub><span class="hidden">&#8681;</span><sub>y</sub><span class="hidden">&#8681;</span><sub>m</sub><span class="hidden">&#8681;</span><sub>r</sub><span class="hidden">&#8681;</span><sub>u</sub><span class="hidden">&#8681;</span><sub>n</sub>&quot;</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">proof</span></span><span class=""> </span><span class="delimiter">(</span><span class="">induct</span><span class=""> </span><span class="">&#915;<span class="hidden">&#8681;</span><sub>1</sub></span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword3"><span class="command">case</span></span><span class=""> </span><span class="">Nil</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command">then</span></span><span class=""> </span><span class="keyword3"><span class="command">show</span></span><span class=""> </span><span class="var">?case</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">next</span></span><span class="">
</span><span class="">    </span><span class="keyword3"><span class="command">case</span></span><span class=""> </span><span class="delimiter">(</span><span class="">Cons</span><span class=""> </span><span class="">a</span><span class=""> </span><span class="">&#915;<span class="hidden">&#8681;</span><sub>1</sub></span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command">then</span></span><span class=""> </span><span class="keyword3"><span class="command">show</span></span><span class=""> </span><span class="var">?case</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">auto</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">qed</span></span><span class="">
</span><span class="">
</span><span class="comment">(**)</span><span class=""> </span><span class="keyword1"><span class="command">section</span></span><span class=""> </span><span class="cartouche">&#8249;Equational laws for TESL formulae denotationally interpreted&#8250;</span><span class=""> </span><span class="comment">(**)</span><span class="">
</span><span class="comment">(***)</span><span class=""> </span><span class="keyword1"><span class="command">subsection</span></span><span class=""> </span><span class="cartouche">&#8249;General laws&#8250;</span><span class=""> </span><span class="comment">(***)</span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command">lemma</span></span><span class=""> </span><span class="">symrun_interp_assoc</span><span class="delimiter">:</span><span class="">
</span><span class="">  </span><span class="keyword2"><span class="keyword">shows</span></span><span class=""> </span><span class="string">&quot;&#10214;&#10214; (&#915;<span class="hidden">&#8681;</span><sub>1</sub> @ &#915;<span class="hidden">&#8681;</span><sub>2</sub>) @ &#915;<span class="hidden">&#8681;</span><sub>3</sub> &#10215;&#10215;<span class="hidden">&#8681;</span><sub>s</sub><span class="hidden">&#8681;</span><sub>y</sub><span class="hidden">&#8681;</span><sub>m</sub><span class="hidden">&#8681;</span><sub>r</sub><span class="hidden">&#8681;</span><sub>u</sub><span class="hidden">&#8681;</span><sub>n</sub> = &#10214;&#10214; &#915;<span class="hidden">&#8681;</span><sub>1</sub> @ (&#915;<span class="hidden">&#8681;</span><sub>2</sub> @ &#915;<span class="hidden">&#8681;</span><sub>3</sub>) &#10215;&#10215;<span class="hidden">&#8681;</span><sub>s</sub><span class="hidden">&#8681;</span><sub>y</sub><span class="hidden">&#8681;</span><sub>m</sub><span class="hidden">&#8681;</span><sub>r</sub><span class="hidden">&#8681;</span><sub>u</sub><span class="hidden">&#8681;</span><sub>n</sub>&quot;</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">auto</span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command">lemma</span></span><span class=""> </span><span class="">symrun_interp_commute</span><span class="delimiter">:</span><span class="">
</span><span class="">  </span><span class="keyword2"><span class="keyword">shows</span></span><span class=""> </span><span class="string">&quot;&#10214;&#10214; &#915;<span class="hidden">&#8681;</span><sub>1</sub> @ &#915;<span class="hidden">&#8681;</span><sub>2</sub> &#10215;&#10215;<span class="hidden">&#8681;</span><sub>s</sub><span class="hidden">&#8681;</span><sub>y</sub><span class="hidden">&#8681;</span><sub>m</sub><span class="hidden">&#8681;</span><sub>r</sub><span class="hidden">&#8681;</span><sub>u</sub><span class="hidden">&#8681;</span><sub>n</sub> = &#10214;&#10214; &#915;<span class="hidden">&#8681;</span><sub>2</sub> @ &#915;<span class="hidden">&#8681;</span><sub>1</sub> &#10215;&#10215;<span class="hidden">&#8681;</span><sub>s</sub><span class="hidden">&#8681;</span><sub>y</sub><span class="hidden">&#8681;</span><sub>m</sub><span class="hidden">&#8681;</span><sub>r</sub><span class="hidden">&#8681;</span><sub>u</sub><span class="hidden">&#8681;</span><sub>n</sub>&quot;</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class=""> </span><span class="">symrun_interp_expansion</span><span class=""> </span><span class="">inf_sup_aci</span><span class="delimiter">(</span><span class="">1</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command">lemma</span></span><span class=""> </span><span class="">symrun_interp_left_commute</span><span class="delimiter">:</span><span class="">
</span><span class="">  </span><span class="keyword2"><span class="keyword">shows</span></span><span class=""> </span><span class="string">&quot;&#10214;&#10214; &#915;<span class="hidden">&#8681;</span><sub>1</sub> @ (&#915;<span class="hidden">&#8681;</span><sub>2</sub> @ &#915;<span class="hidden">&#8681;</span><sub>3</sub>) &#10215;&#10215;<span class="hidden">&#8681;</span><sub>s</sub><span class="hidden">&#8681;</span><sub>y</sub><span class="hidden">&#8681;</span><sub>m</sub><span class="hidden">&#8681;</span><sub>r</sub><span class="hidden">&#8681;</span><sub>u</sub><span class="hidden">&#8681;</span><sub>n</sub> = &#10214;&#10214; &#915;<span class="hidden">&#8681;</span><sub>2</sub> @ (&#915;<span class="hidden">&#8681;</span><sub>1</sub> @ &#915;<span class="hidden">&#8681;</span><sub>3</sub>) &#10215;&#10215;<span class="hidden">&#8681;</span><sub>s</sub><span class="hidden">&#8681;</span><sub>y</sub><span class="hidden">&#8681;</span><sub>m</sub><span class="hidden">&#8681;</span><sub>r</sub><span class="hidden">&#8681;</span><sub>u</sub><span class="hidden">&#8681;</span><sub>n</sub>&quot;</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">symrun_interp_expansion</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">auto</span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command">lemma</span></span><span class=""> </span><span class="">symrun_interp_idem</span><span class="delimiter">:</span><span class="">
</span><span class="">  </span><span class="keyword2"><span class="keyword">shows</span></span><span class=""> </span><span class="string">&quot;&#10214;&#10214; &#915; @ &#915; &#10215;&#10215;<span class="hidden">&#8681;</span><sub>s</sub><span class="hidden">&#8681;</span><sub>y</sub><span class="hidden">&#8681;</span><sub>m</sub><span class="hidden">&#8681;</span><sub>r</sub><span class="hidden">&#8681;</span><sub>u</sub><span class="hidden">&#8681;</span><sub>n</sub> = &#10214;&#10214; &#915; &#10215;&#10215;<span class="hidden">&#8681;</span><sub>s</sub><span class="hidden">&#8681;</span><sub>y</sub><span class="hidden">&#8681;</span><sub>m</sub><span class="hidden">&#8681;</span><sub>r</sub><span class="hidden">&#8681;</span><sub>u</sub><span class="hidden">&#8681;</span><sub>n</sub>&quot;</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">symrun_interp_expansion</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">auto</span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command">lemma</span></span><span class=""> </span><span class="">symrun_interp_left_idem</span><span class="delimiter">:</span><span class="">
</span><span class="">  </span><span class="keyword2"><span class="keyword">shows</span></span><span class=""> </span><span class="string">&quot;&#10214;&#10214; &#915;<span class="hidden">&#8681;</span><sub>1</sub> @ (&#915;<span class="hidden">&#8681;</span><sub>1</sub> @ &#915;<span class="hidden">&#8681;</span><sub>2</sub>) &#10215;&#10215;<span class="hidden">&#8681;</span><sub>s</sub><span class="hidden">&#8681;</span><sub>y</sub><span class="hidden">&#8681;</span><sub>m</sub><span class="hidden">&#8681;</span><sub>r</sub><span class="hidden">&#8681;</span><sub>u</sub><span class="hidden">&#8681;</span><sub>n</sub> = &#10214;&#10214; &#915;<span class="hidden">&#8681;</span><sub>1</sub> @ &#915;<span class="hidden">&#8681;</span><sub>2</sub> &#10215;&#10215;<span class="hidden">&#8681;</span><sub>s</sub><span class="hidden">&#8681;</span><sub>y</sub><span class="hidden">&#8681;</span><sub>m</sub><span class="hidden">&#8681;</span><sub>r</sub><span class="hidden">&#8681;</span><sub>u</sub><span class="hidden">&#8681;</span><sub>n</sub>&quot;</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">symrun_interp_expansion</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">auto</span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command">lemma</span></span><span class=""> </span><span class="">symrun_interp_right_idem</span><span class="delimiter">:</span><span class="">
</span><span class="">  </span><span class="keyword2"><span class="keyword">shows</span></span><span class=""> </span><span class="string">&quot;&#10214;&#10214; (&#915;<span class="hidden">&#8681;</span><sub>1</sub> @ &#915;<span class="hidden">&#8681;</span><sub>2</sub>) @ &#915;<span class="hidden">&#8681;</span><sub>2</sub> &#10215;&#10215;<span class="hidden">&#8681;</span><sub>s</sub><span class="hidden">&#8681;</span><sub>y</sub><span class="hidden">&#8681;</span><sub>m</sub><span class="hidden">&#8681;</span><sub>r</sub><span class="hidden">&#8681;</span><sub>u</sub><span class="hidden">&#8681;</span><sub>n</sub> = &#10214;&#10214; &#915;<span class="hidden">&#8681;</span><sub>1</sub> @ &#915;<span class="hidden">&#8681;</span><sub>2</sub> &#10215;&#10215;<span class="hidden">&#8681;</span><sub>s</sub><span class="hidden">&#8681;</span><sub>y</sub><span class="hidden">&#8681;</span><sub>m</sub><span class="hidden">&#8681;</span><sub>r</sub><span class="hidden">&#8681;</span><sub>u</sub><span class="hidden">&#8681;</span><sub>n</sub>&quot;</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">symrun_interp_expansion</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">auto</span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command">lemmas</span></span><span class=""> </span><span class="">symrun_interp_aci</span><span class=""> </span><span class="delimiter">=</span><span class=""> </span><span class="">symrun_interp_commute</span><span class=""> </span><span class="">symrun_interp_assoc</span><span class=""> </span><span class="">symrun_interp_left_commute</span><span class=""> </span><span class="">symrun_interp_left_idem</span><span class="">
</span><span class="">
</span><span class="comment">(* Identity element *)</span><span class="">
</span><span class="keyword1"><span class="command">lemma</span></span><span class=""> </span><span class="">symrun_interp_neutral1</span><span class="delimiter">:</span><span class="">
</span><span class="">  </span><span class="keyword2"><span class="keyword">shows</span></span><span class=""> </span><span class="string">&quot;&#10214;&#10214; [] @ &#915; &#10215;&#10215;<span class="hidden">&#8681;</span><sub>s</sub><span class="hidden">&#8681;</span><sub>y</sub><span class="hidden">&#8681;</span><sub>m</sub><span class="hidden">&#8681;</span><sub>r</sub><span class="hidden">&#8681;</span><sub>u</sub><span class="hidden">&#8681;</span><sub>n</sub> = &#10214;&#10214; &#915; &#10215;&#10215;<span class="hidden">&#8681;</span><sub>s</sub><span class="hidden">&#8681;</span><sub>y</sub><span class="hidden">&#8681;</span><sub>m</sub><span class="hidden">&#8681;</span><sub>r</sub><span class="hidden">&#8681;</span><sub>u</sub><span class="hidden">&#8681;</span><sub>n</sub>&quot;</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command">lemma</span></span><span class=""> </span><span class="">symrun_interp_neutral2</span><span class="delimiter">:</span><span class="">
</span><span class="">  </span><span class="keyword2"><span class="keyword">shows</span></span><span class=""> </span><span class="string">&quot;&#10214;&#10214; &#915; @ [] &#10215;&#10215;<span class="hidden">&#8681;</span><sub>s</sub><span class="hidden">&#8681;</span><sub>y</sub><span class="hidden">&#8681;</span><sub>m</sub><span class="hidden">&#8681;</span><sub>r</sub><span class="hidden">&#8681;</span><sub>u</sub><span class="hidden">&#8681;</span><sub>n</sub> = &#10214;&#10214; &#915; &#10215;&#10215;<span class="hidden">&#8681;</span><sub>s</sub><span class="hidden">&#8681;</span><sub>y</sub><span class="hidden">&#8681;</span><sub>m</sub><span class="hidden">&#8681;</span><sub>r</sub><span class="hidden">&#8681;</span><sub>u</sub><span class="hidden">&#8681;</span><sub>n</sub>&quot;</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command">section</span></span><span class=""> </span><span class="cartouche">&#8249;Decreasing interpretation of TESL formulae&#8250;</span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command">lemma</span></span><span class=""> </span><span class="">TESL_sem_decreases_head</span><span class="delimiter">:</span><span class="">
</span><span class="">  </span><span class="string">&quot;&#10214;&#10214; &#915; &#10215;&#10215;<span class="hidden">&#8681;</span><sub>s</sub><span class="hidden">&#8681;</span><sub>y</sub><span class="hidden">&#8681;</span><sub>m</sub><span class="hidden">&#8681;</span><sub>r</sub><span class="hidden">&#8681;</span><sub>u</sub><span class="hidden">&#8681;</span><sub>n</sub> &#8839; &#10214;&#10214; &#947; # &#915; &#10215;&#10215;<span class="hidden">&#8681;</span><sub>s</sub><span class="hidden">&#8681;</span><sub>y</sub><span class="hidden">&#8681;</span><sub>m</sub><span class="hidden">&#8681;</span><sub>r</sub><span class="hidden">&#8681;</span><sub>u</sub><span class="hidden">&#8681;</span><sub>n</sub>&quot;</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command">lemma</span></span><span class=""> </span><span class="">TESL_sem_decreases_tail</span><span class="delimiter">:</span><span class="">
</span><span class="">  </span><span class="string">&quot;&#10214;&#10214; &#915; &#10215;&#10215;<span class="hidden">&#8681;</span><sub>s</sub><span class="hidden">&#8681;</span><sub>y</sub><span class="hidden">&#8681;</span><sub>m</sub><span class="hidden">&#8681;</span><sub>r</sub><span class="hidden">&#8681;</span><sub>u</sub><span class="hidden">&#8681;</span><sub>n</sub> &#8839; &#10214;&#10214; &#915; @ [&#947;] &#10215;&#10215;<span class="hidden">&#8681;</span><sub>s</sub><span class="hidden">&#8681;</span><sub>y</sub><span class="hidden">&#8681;</span><sub>m</sub><span class="hidden">&#8681;</span><sub>r</sub><span class="hidden">&#8681;</span><sub>u</sub><span class="hidden">&#8681;</span><sub>n</sub>&quot;</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class=""> </span><span class="">symrun_interp_expansion</span><span class="delimiter">)</span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command">lemma</span></span><span class=""> </span><span class="">symrun_interp_formula_stuttering</span><span class="delimiter">:</span><span class="">
</span><span class="">  </span><span class="keyword2"><span class="keyword">assumes</span></span><span class=""> </span><span class="">bel</span><span class="delimiter">:</span><span class=""> </span><span class="string">&quot;&#947; &#8712; set &#915;&quot;</span><span class="">
</span><span class="">  </span><span class="keyword2"><span class="keyword">shows</span></span><span class=""> </span><span class="string">&quot;&#10214;&#10214; &#947; # &#915; &#10215;&#10215;<span class="hidden">&#8681;</span><sub>s</sub><span class="hidden">&#8681;</span><sub>y</sub><span class="hidden">&#8681;</span><sub>m</sub><span class="hidden">&#8681;</span><sub>r</sub><span class="hidden">&#8681;</span><sub>u</sub><span class="hidden">&#8681;</span><sub>n</sub> = &#10214;&#10214; &#915; &#10215;&#10215;<span class="hidden">&#8681;</span><sub>s</sub><span class="hidden">&#8681;</span><sub>y</sub><span class="hidden">&#8681;</span><sub>m</sub><span class="hidden">&#8681;</span><sub>r</sub><span class="hidden">&#8681;</span><sub>u</sub><span class="hidden">&#8681;</span><sub>n</sub>&quot;</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="delimiter">(</span><span class="">metis</span><span class=""> </span><span class="">Int_absorb1</span><span class=""> </span><span class="">Int_left_commute</span><span class=""> </span><span class="">bel</span><span class=""> </span><span class="">inf_le1</span><span class=""> </span><span class="">split_list</span><span class=""> </span><span class="">symbolic_run_interpretation.simps</span><span class="delimiter">(</span><span class="">2</span><span class="delimiter">)</span><span class=""> </span><span class="">symrun_interp_expansion</span><span class="delimiter">)</span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command">lemma</span></span><span class=""> </span><span class="">symrun_interp_decreases</span><span class="delimiter">:</span><span class="">
</span><span class="">  </span><span class="keyword2"><span class="keyword">shows</span></span><span class=""> </span><span class="string">&quot;&#10214;&#10214; &#915; &#10215;&#10215;<span class="hidden">&#8681;</span><sub>s</sub><span class="hidden">&#8681;</span><sub>y</sub><span class="hidden">&#8681;</span><sub>m</sub><span class="hidden">&#8681;</span><sub>r</sub><span class="hidden">&#8681;</span><sub>u</sub><span class="hidden">&#8681;</span><sub>n</sub> &#8839; &#10214;&#10214; &#947; # &#915; &#10215;&#10215;<span class="hidden">&#8681;</span><sub>s</sub><span class="hidden">&#8681;</span><sub>y</sub><span class="hidden">&#8681;</span><sub>m</sub><span class="hidden">&#8681;</span><sub>r</sub><span class="hidden">&#8681;</span><sub>u</sub><span class="hidden">&#8681;</span><sub>n</sub>&quot;</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">TESL_sem_decreases_head</span><span class="delimiter">)</span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command">lemma</span></span><span class=""> </span><span class="">symrun_interp_remdups_absorb</span><span class="delimiter">:</span><span class="">
</span><span class="">  </span><span class="keyword2"><span class="keyword">shows</span></span><span class=""> </span><span class="string">&quot;&#10214;&#10214; &#915; &#10215;&#10215;<span class="hidden">&#8681;</span><sub>s</sub><span class="hidden">&#8681;</span><sub>y</sub><span class="hidden">&#8681;</span><sub>m</sub><span class="hidden">&#8681;</span><sub>r</sub><span class="hidden">&#8681;</span><sub>u</sub><span class="hidden">&#8681;</span><sub>n</sub> = &#10214;&#10214; remdups &#915; &#10215;&#10215;<span class="hidden">&#8681;</span><sub>s</sub><span class="hidden">&#8681;</span><sub>y</sub><span class="hidden">&#8681;</span><sub>m</sub><span class="hidden">&#8681;</span><sub>r</sub><span class="hidden">&#8681;</span><sub>u</sub><span class="hidden">&#8681;</span><sub>n</sub>&quot;</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">proof</span></span><span class=""> </span><span class="delimiter">(</span><span class="">induct</span><span class=""> </span><span class="">&#915;</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword3"><span class="command">case</span></span><span class=""> </span><span class="">Nil</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command">then</span></span><span class=""> </span><span class="keyword3"><span class="command">show</span></span><span class=""> </span><span class="var">?case</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">next</span></span><span class="">
</span><span class="">    </span><span class="keyword3"><span class="command">case</span></span><span class=""> </span><span class="delimiter">(</span><span class="">Cons</span><span class=""> </span><span class="">a</span><span class=""> </span><span class="">&#915;</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command">then</span></span><span class=""> </span><span class="keyword3"><span class="command">show</span></span><span class=""> </span><span class="var">?case</span><span class="">
</span><span class="">      </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">symrun_interp_formula_stuttering</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">auto</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">qed</span></span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command">lemma</span></span><span class=""> </span><span class="">symrun_interp_set_lifting</span><span class="delimiter">:</span><span class="">
</span><span class="">  </span><span class="keyword2"><span class="keyword">assumes</span></span><span class=""> </span><span class="string">&quot;set &#915; = set &#915;&#39;&quot;</span><span class="">
</span><span class="">  </span><span class="keyword2"><span class="keyword">shows</span></span><span class=""> </span><span class="string">&quot;&#10214;&#10214; &#915; &#10215;&#10215;<span class="hidden">&#8681;</span><sub>s</sub><span class="hidden">&#8681;</span><sub>y</sub><span class="hidden">&#8681;</span><sub>m</sub><span class="hidden">&#8681;</span><sub>r</sub><span class="hidden">&#8681;</span><sub>u</sub><span class="hidden">&#8681;</span><sub>n</sub> = &#10214;&#10214; &#915;&#39; &#10215;&#10215;<span class="hidden">&#8681;</span><sub>s</sub><span class="hidden">&#8681;</span><sub>y</sub><span class="hidden">&#8681;</span><sub>m</sub><span class="hidden">&#8681;</span><sub>r</sub><span class="hidden">&#8681;</span><sub>u</sub><span class="hidden">&#8681;</span><sub>n</sub>&quot;</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">proof</span></span><span class=""> </span><span class="">-</span><span class="">     
</span><span class="">    </span><span class="keyword1"><span class="command">have</span></span><span class=""> </span><span class="string">&quot;set (remdups &#915;) = set (remdups &#915;&#39;)&quot;</span><span class="">
</span><span class="">      </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class=""> </span><span class="">assms</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command">moreover</span></span><span class=""> </span><span class="keyword1"><span class="command">have</span></span><span class=""> </span><span class="">fxpnt&#915;</span><span class="delimiter">:</span><span class=""> </span><span class="string">&quot;&#8898; ((&#955;&#947;. &#10214; &#947; &#10215;<span class="hidden">&#8681;</span><sub>s</sub><span class="hidden">&#8681;</span><sub>y</sub><span class="hidden">&#8681;</span><sub>m</sub><span class="hidden">&#8681;</span><sub>r</sub><span class="hidden">&#8681;</span><sub>u</sub><span class="hidden">&#8681;</span><sub>n</sub>) ` set &#915;) = &#10214;&#10214; &#915; &#10215;&#10215;<span class="hidden">&#8681;</span><sub>s</sub><span class="hidden">&#8681;</span><sub>y</sub><span class="hidden">&#8681;</span><sub>m</sub><span class="hidden">&#8681;</span><sub>r</sub><span class="hidden">&#8681;</span><sub>u</sub><span class="hidden">&#8681;</span><sub>n</sub>&quot;</span><span class="">
</span><span class="">      </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class=""> </span><span class="">symrun_interp_fixpoint</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command">moreover</span></span><span class=""> </span><span class="keyword1"><span class="command">have</span></span><span class=""> </span><span class="">fxpnt&#915;&#39;</span><span class="delimiter">:</span><span class=""> </span><span class="string">&quot;&#8898; ((&#955;&#947;. &#10214; &#947; &#10215;<span class="hidden">&#8681;</span><sub>s</sub><span class="hidden">&#8681;</span><sub>y</sub><span class="hidden">&#8681;</span><sub>m</sub><span class="hidden">&#8681;</span><sub>r</sub><span class="hidden">&#8681;</span><sub>u</sub><span class="hidden">&#8681;</span><sub>n</sub>) ` set &#915;&#39;) = &#10214;&#10214; &#915;&#39; &#10215;&#10215;<span class="hidden">&#8681;</span><sub>s</sub><span class="hidden">&#8681;</span><sub>y</sub><span class="hidden">&#8681;</span><sub>m</sub><span class="hidden">&#8681;</span><sub>r</sub><span class="hidden">&#8681;</span><sub>u</sub><span class="hidden">&#8681;</span><sub>n</sub>&quot;</span><span class="">
</span><span class="">      </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class=""> </span><span class="">symrun_interp_fixpoint</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command">moreover</span></span><span class=""> </span><span class="keyword1"><span class="command">have</span></span><span class=""> </span><span class="string">&quot;&#8898; ((&#955;&#947;. &#10214; &#947; &#10215;<span class="hidden">&#8681;</span><sub>s</sub><span class="hidden">&#8681;</span><sub>y</sub><span class="hidden">&#8681;</span><sub>m</sub><span class="hidden">&#8681;</span><sub>r</sub><span class="hidden">&#8681;</span><sub>u</sub><span class="hidden">&#8681;</span><sub>n</sub>) ` set &#915;) = &#8898; ((&#955;&#947;. &#10214; &#947; &#10215;<span class="hidden">&#8681;</span><sub>s</sub><span class="hidden">&#8681;</span><sub>y</sub><span class="hidden">&#8681;</span><sub>m</sub><span class="hidden">&#8681;</span><sub>r</sub><span class="hidden">&#8681;</span><sub>u</sub><span class="hidden">&#8681;</span><sub>n</sub>) ` set &#915;&#39;)&quot;</span><span class="">
</span><span class="">      </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class=""> </span><span class="">assms</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command">ultimately</span></span><span class=""> </span><span class="keyword3"><span class="command">show</span></span><span class=""> </span><span class="var">?thesis</span><span class=""> </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">symrun_interp_remdups_absorb</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">auto</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">qed</span></span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command">theorem</span></span><span class=""> </span><span class="">symrun_interp_decreases_setinc</span><span class="delimiter">:</span><span class="">
</span><span class="">  </span><span class="keyword2"><span class="keyword">assumes</span></span><span class=""> </span><span class="">incl</span><span class="delimiter">:</span><span class=""> </span><span class="string">&quot;set &#915; &#8838; set &#915;&#39;&quot;</span><span class="">
</span><span class="">  </span><span class="keyword2"><span class="keyword">shows</span></span><span class=""> </span><span class="string">&quot;&#10214;&#10214; &#915; &#10215;&#10215;<span class="hidden">&#8681;</span><sub>s</sub><span class="hidden">&#8681;</span><sub>y</sub><span class="hidden">&#8681;</span><sub>m</sub><span class="hidden">&#8681;</span><sub>r</sub><span class="hidden">&#8681;</span><sub>u</sub><span class="hidden">&#8681;</span><sub>n</sub> &#8839; &#10214;&#10214; &#915;&#39; &#10215;&#10215;<span class="hidden">&#8681;</span><sub>s</sub><span class="hidden">&#8681;</span><sub>y</sub><span class="hidden">&#8681;</span><sub>m</sub><span class="hidden">&#8681;</span><sub>r</sub><span class="hidden">&#8681;</span><sub>u</sub><span class="hidden">&#8681;</span><sub>n</sub>&quot;</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">proof</span></span><span class=""> </span><span class="">-</span><span class="">
</span><span class="">    </span><span class="keyword3"><span class="command">obtain</span></span><span class=""> </span><span class="">&#915;<span class="hidden">&#8681;</span><sub>r</sub></span><span class=""> </span><span class="keyword2"><span class="keyword">where</span></span><span class=""> </span><span class="">decompose</span><span class="delimiter">:</span><span class=""> </span><span class="string">&quot;set (&#915; @ &#915;<span class="hidden">&#8681;</span><sub>r</sub>) = set &#915;&#39;&quot;</span><span class=""> </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">incl</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">auto</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command">have</span></span><span class=""> </span><span class="string">&quot;set (&#915; @ &#915;<span class="hidden">&#8681;</span><sub>r</sub>) = set &#915;&#39;&quot;</span><span class=""> </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">incl</span><span class=""> </span><span class="">decompose</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">blast</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command">moreover</span></span><span class=""> </span><span class="keyword1"><span class="command">have</span></span><span class=""> </span><span class="string">&quot;(set &#915;) &#8746; (set &#915;<span class="hidden">&#8681;</span><sub>r</sub>) = set &#915;&#39;&quot;</span><span class=""> </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">incl</span><span class=""> </span><span class="">decompose</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">auto</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command">moreover</span></span><span class=""> </span><span class="keyword1"><span class="command">have</span></span><span class=""> </span><span class="string">&quot;&#10214;&#10214; &#915;&#39; &#10215;&#10215;<span class="hidden">&#8681;</span><sub>s</sub><span class="hidden">&#8681;</span><sub>y</sub><span class="hidden">&#8681;</span><sub>m</sub><span class="hidden">&#8681;</span><sub>r</sub><span class="hidden">&#8681;</span><sub>u</sub><span class="hidden">&#8681;</span><sub>n</sub> = &#10214;&#10214; &#915; @ &#915;<span class="hidden">&#8681;</span><sub>r</sub> &#10215;&#10215;<span class="hidden">&#8681;</span><sub>s</sub><span class="hidden">&#8681;</span><sub>y</sub><span class="hidden">&#8681;</span><sub>m</sub><span class="hidden">&#8681;</span><sub>r</sub><span class="hidden">&#8681;</span><sub>u</sub><span class="hidden">&#8681;</span><sub>n</sub>&quot;</span><span class=""> </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">symrun_interp_set_lifting</span><span class=""> </span><span class="">decompose</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">blast</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command">moreover</span></span><span class=""> </span><span class="keyword1"><span class="command">have</span></span><span class=""> </span><span class="string">&quot;&#10214;&#10214; &#915; @ &#915;<span class="hidden">&#8681;</span><sub>r</sub> &#10215;&#10215;<span class="hidden">&#8681;</span><sub>s</sub><span class="hidden">&#8681;</span><sub>y</sub><span class="hidden">&#8681;</span><sub>m</sub><span class="hidden">&#8681;</span><sub>r</sub><span class="hidden">&#8681;</span><sub>u</sub><span class="hidden">&#8681;</span><sub>n</sub> = &#10214;&#10214; &#915; &#10215;&#10215;<span class="hidden">&#8681;</span><sub>s</sub><span class="hidden">&#8681;</span><sub>y</sub><span class="hidden">&#8681;</span><sub>m</sub><span class="hidden">&#8681;</span><sub>r</sub><span class="hidden">&#8681;</span><sub>u</sub><span class="hidden">&#8681;</span><sub>n</sub> &#8745; &#10214;&#10214; &#915;<span class="hidden">&#8681;</span><sub>r</sub> &#10215;&#10215;<span class="hidden">&#8681;</span><sub>s</sub><span class="hidden">&#8681;</span><sub>y</sub><span class="hidden">&#8681;</span><sub>m</sub><span class="hidden">&#8681;</span><sub>r</sub><span class="hidden">&#8681;</span><sub>u</sub><span class="hidden">&#8681;</span><sub>n</sub>&quot;</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class=""> </span><span class="">symrun_interp_expansion</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command">moreover</span></span><span class=""> </span><span class="keyword1"><span class="command">have</span></span><span class=""> </span><span class="string">&quot;&#10214;&#10214; &#915; &#10215;&#10215;<span class="hidden">&#8681;</span><sub>s</sub><span class="hidden">&#8681;</span><sub>y</sub><span class="hidden">&#8681;</span><sub>m</sub><span class="hidden">&#8681;</span><sub>r</sub><span class="hidden">&#8681;</span><sub>u</sub><span class="hidden">&#8681;</span><sub>n</sub> &#8839; &#10214;&#10214; &#915; &#10215;&#10215;<span class="hidden">&#8681;</span><sub>s</sub><span class="hidden">&#8681;</span><sub>y</sub><span class="hidden">&#8681;</span><sub>m</sub><span class="hidden">&#8681;</span><sub>r</sub><span class="hidden">&#8681;</span><sub>u</sub><span class="hidden">&#8681;</span><sub>n</sub> &#8745; &#10214;&#10214; &#915;<span class="hidden">&#8681;</span><sub>r</sub> &#10215;&#10215;<span class="hidden">&#8681;</span><sub>s</sub><span class="hidden">&#8681;</span><sub>y</sub><span class="hidden">&#8681;</span><sub>m</sub><span class="hidden">&#8681;</span><sub>r</sub><span class="hidden">&#8681;</span><sub>u</sub><span class="hidden">&#8681;</span><sub>n</sub>&quot;</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command">ultimately</span></span><span class=""> </span><span class="keyword3"><span class="command">show</span></span><span class=""> </span><span class="var">?thesis</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">qed</span></span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command">lemma</span></span><span class=""> </span><span class="">symrun_interp_decreases_add_head</span><span class="delimiter">:</span><span class="">
</span><span class="">  </span><span class="keyword2"><span class="keyword">assumes</span></span><span class=""> </span><span class="">incl</span><span class="delimiter">:</span><span class=""> </span><span class="string">&quot;set &#915; &#8838; set &#915;&#39;&quot;</span><span class="">
</span><span class="">  </span><span class="keyword2"><span class="keyword">shows</span></span><span class=""> </span><span class="string">&quot;&#10214;&#10214; &#947; # &#915; &#10215;&#10215;<span class="hidden">&#8681;</span><sub>s</sub><span class="hidden">&#8681;</span><sub>y</sub><span class="hidden">&#8681;</span><sub>m</sub><span class="hidden">&#8681;</span><sub>r</sub><span class="hidden">&#8681;</span><sub>u</sub><span class="hidden">&#8681;</span><sub>n</sub> &#8839; &#10214;&#10214; &#947; # &#915;&#39; &#10215;&#10215;<span class="hidden">&#8681;</span><sub>s</sub><span class="hidden">&#8681;</span><sub>y</sub><span class="hidden">&#8681;</span><sub>m</sub><span class="hidden">&#8681;</span><sub>r</sub><span class="hidden">&#8681;</span><sub>u</sub><span class="hidden">&#8681;</span><sub>n</sub>&quot;</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">symrun_interp_decreases_setinc</span><span class=""> </span><span class="">incl</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">auto</span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command">lemma</span></span><span class=""> </span><span class="">symrun_interp_decreases_add_tail</span><span class="delimiter">:</span><span class="">
</span><span class="">  </span><span class="keyword2"><span class="keyword">assumes</span></span><span class=""> </span><span class="">incl</span><span class="delimiter">:</span><span class=""> </span><span class="string">&quot;set &#915; &#8838; set &#915;&#39;&quot;</span><span class="">
</span><span class="">  </span><span class="keyword2"><span class="keyword">shows</span></span><span class=""> </span><span class="string">&quot;&#10214;&#10214; &#915; @ [&#947;] &#10215;&#10215;<span class="hidden">&#8681;</span><sub>s</sub><span class="hidden">&#8681;</span><sub>y</sub><span class="hidden">&#8681;</span><sub>m</sub><span class="hidden">&#8681;</span><sub>r</sub><span class="hidden">&#8681;</span><sub>u</sub><span class="hidden">&#8681;</span><sub>n</sub> &#8839; &#10214;&#10214; &#915;&#39; @ [&#947;] &#10215;&#10215;<span class="hidden">&#8681;</span><sub>s</sub><span class="hidden">&#8681;</span><sub>y</sub><span class="hidden">&#8681;</span><sub>m</sub><span class="hidden">&#8681;</span><sub>r</sub><span class="hidden">&#8681;</span><sub>u</sub><span class="hidden">&#8681;</span><sub>n</sub>&quot;</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="delimiter">(</span><span class="">metis</span><span class=""> </span><span class="">symrun_interp_commute</span><span class=""> </span><span class="">symrun_interp_decreases_add_head</span><span class=""> </span><span class="">append_Cons</span><span class=""> </span><span class="">append_Nil</span><span class=""> </span><span class="">incl</span><span class="delimiter">)</span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command">lemma</span></span><span class=""> </span><span class="">symrun_interp_absorb1</span><span class="delimiter">:</span><span class="">
</span><span class="">  </span><span class="keyword2"><span class="keyword">assumes</span></span><span class=""> </span><span class="">incl</span><span class="delimiter">:</span><span class=""> </span><span class="string">&quot;set &#915;<span class="hidden">&#8681;</span><sub>1</sub> &#8838; set &#915;<span class="hidden">&#8681;</span><sub>2</sub>&quot;</span><span class="">
</span><span class="">  </span><span class="keyword2"><span class="keyword">shows</span></span><span class=""> </span><span class="string">&quot;&#10214;&#10214; &#915;<span class="hidden">&#8681;</span><sub>1</sub> @ &#915;<span class="hidden">&#8681;</span><sub>2</sub> &#10215;&#10215;<span class="hidden">&#8681;</span><sub>s</sub><span class="hidden">&#8681;</span><sub>y</sub><span class="hidden">&#8681;</span><sub>m</sub><span class="hidden">&#8681;</span><sub>r</sub><span class="hidden">&#8681;</span><sub>u</sub><span class="hidden">&#8681;</span><sub>n</sub> = &#10214;&#10214; &#915;<span class="hidden">&#8681;</span><sub>2</sub> &#10215;&#10215;<span class="hidden">&#8681;</span><sub>s</sub><span class="hidden">&#8681;</span><sub>y</sub><span class="hidden">&#8681;</span><sub>m</sub><span class="hidden">&#8681;</span><sub>r</sub><span class="hidden">&#8681;</span><sub>u</sub><span class="hidden">&#8681;</span><sub>n</sub>&quot;</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class=""> </span><span class="">Int_absorb1</span><span class=""> </span><span class="">symrun_interp_decreases_setinc</span><span class=""> </span><span class="">symrun_interp_expansion</span><span class=""> </span><span class="">incl</span><span class="delimiter">)</span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command">lemma</span></span><span class=""> </span><span class="">symrun_interp_absorb2</span><span class="delimiter">:</span><span class="">
</span><span class="">  </span><span class="keyword2"><span class="keyword">assumes</span></span><span class=""> </span><span class="">incl</span><span class="delimiter">:</span><span class=""> </span><span class="string">&quot;set &#915;<span class="hidden">&#8681;</span><sub>2</sub> &#8838; set &#915;<span class="hidden">&#8681;</span><sub>1</sub>&quot;</span><span class="">
</span><span class="">  </span><span class="keyword2"><span class="keyword">shows</span></span><span class=""> </span><span class="string">&quot;&#10214;&#10214; &#915;<span class="hidden">&#8681;</span><sub>1</sub> @ &#915;<span class="hidden">&#8681;</span><sub>2</sub> &#10215;&#10215;<span class="hidden">&#8681;</span><sub>s</sub><span class="hidden">&#8681;</span><sub>y</sub><span class="hidden">&#8681;</span><sub>m</sub><span class="hidden">&#8681;</span><sub>r</sub><span class="hidden">&#8681;</span><sub>u</sub><span class="hidden">&#8681;</span><sub>n</sub> = &#10214;&#10214; &#915;<span class="hidden">&#8681;</span><sub>1</sub> &#10215;&#10215;<span class="hidden">&#8681;</span><sub>s</sub><span class="hidden">&#8681;</span><sub>y</sub><span class="hidden">&#8681;</span><sub>m</sub><span class="hidden">&#8681;</span><sub>r</sub><span class="hidden">&#8681;</span><sub>u</sub><span class="hidden">&#8681;</span><sub>n</sub>&quot;</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">symrun_interp_absorb1</span><span class=""> </span><span class="">symrun_interp_commute</span><span class=""> </span><span class="">incl</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">blast</span><span class="">
</span><span class="">
</span><span class="keyword2"><span class="keyword">end</span></span><span class="">
</span></pre>

</div>
</body>
</html>
