<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<title>Theory Stuttering (Isabelle2017: October 2017)</title>
<link media="all" rel="stylesheet" type="text/css" href="isabelle.css"/>
</head>

<body>
<div class="head"><h1>Theory Stuttering</h1>

<span class="command">theory</span> <span class="name">Stuttering</span><br/>
<span class="keyword">imports</span> <a href="StutteringLemmas.html"><span class="name">StutteringLemmas</span></a><br/>

</div>
<div class="source">
<pre class="source"><span class="keyword1"><span class="command">theory</span></span><span class=""> </span><span class="">Stuttering</span><span class="">
</span><span class="keyword2"><span class="keyword">imports</span></span><span class=""> </span><span class="">StutteringLemmas</span><span class="">
</span><span class="">
</span><span class="keyword2"><span class="keyword">begin</span></span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command">text</span></span><span class=""> </span><span class="verbatim">{*
  Sporadic specifications are preserved in a dilated run.
*}</span><span class="">
</span><span class="keyword1"><span class="command">lemma</span></span><span class=""> </span><span class="">sporadic_sub</span><span class="delimiter">:</span><span class="">
</span><span class="">  </span><span class="keyword2"><span class="keyword">assumes</span></span><span class=""> </span><span class="string">&quot;sub &#8810; r&quot;</span><span class="">
</span><span class="">      </span><span class="keyword2"><span class="keyword">and</span></span><span class=""> </span><span class="string">&quot;sub &#8712; &#10214;c sporadic &#10631;&#964;&#10632; on c&#39;&#10215;<span class="hidden">&#8681;</span><sub>T</sub><span class="hidden">&#8681;</span><sub>E</sub><span class="hidden">&#8681;</span><sub>S</sub><span class="hidden">&#8681;</span><sub>L</sub>&quot;</span><span class="">
</span><span class="">    </span><span class="keyword2"><span class="keyword">shows</span></span><span class=""> </span><span class="string">&quot;r &#8712; &#10214;c sporadic &#10631;&#964;&#10632; on c&#39;&#10215;<span class="hidden">&#8681;</span><sub>T</sub><span class="hidden">&#8681;</span><sub>E</sub><span class="hidden">&#8681;</span><sub>S</sub><span class="hidden">&#8681;</span><sub>L</sub>&quot;</span><span class="">
</span><span class="keyword1"><span class="command">proof</span></span><span class=""> </span><span class="">-</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">from</span></span><span class=""> </span><span class="">assms</span><span class="delimiter">(</span><span class="">1</span><span class="delimiter">)</span><span class=""> </span><span class="">is_subrun_def</span><span class=""> </span><span class="keyword3"><span class="command">obtain</span></span><span class=""> </span><span class="">f</span><span class="">
</span><span class="">    </span><span class="keyword2"><span class="keyword">where</span></span><span class=""> </span><span class="string">&quot;dilating f sub r&quot;</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">blast</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">hence</span></span><span class=""> </span><span class="string">&quot;&#8704;n c. time ((Rep_run sub) n c) = time ((Rep_run r) (f n) c)
           &#8743; hamlet ((Rep_run sub) n c) = hamlet ((Rep_run r) (f n) c)&quot;</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class=""> </span><span class="">dilating_def</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">moreover</span></span><span class=""> </span><span class="keyword1"><span class="command">from</span></span><span class=""> </span><span class="">assms</span><span class="delimiter">(</span><span class="">2</span><span class="delimiter">)</span><span class=""> </span><span class="keyword1"><span class="command">have</span></span><span class="">
</span><span class="">    </span><span class="string">&quot;sub &#8712; {r. &#8707; n. hamlet ((Rep_run r) n c) &#8743; time ((Rep_run r) n c&#39;) = &#964;}&quot;</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">from</span></span><span class=""> </span><span class="">this</span><span class=""> </span><span class="keyword3"><span class="command">obtain</span></span><span class=""> </span><span class="">k</span><span class=""> </span><span class="keyword2"><span class="keyword">where</span></span><span class=""> </span><span class="string">&quot;time ((Rep_run sub) k c&#39;) = &#964; &#8743; hamlet ((Rep_run sub) k c)&quot;</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">auto</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">ultimately</span></span><span class=""> </span><span class="keyword1"><span class="command">have</span></span><span class=""> </span><span class="string">&quot;time ((Rep_run r) (f k) c&#39;) = &#964; &#8743; hamlet ((Rep_run r) (f k) c)&quot;</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">  </span><span class="keyword3"><span class="command">thus</span></span><span class=""> </span><span class="var">?thesis</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">auto</span><span class="">
</span><span class="keyword1"><span class="command">qed</span></span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command">text</span></span><span class=""> </span><span class="verbatim">{*
  Implications are preserved in a dilated run.
*}</span><span class="">
</span><span class="keyword1"><span class="command">theorem</span></span><span class=""> </span><span class="">implies_sub</span><span class="delimiter">:</span><span class="">
</span><span class="">  </span><span class="keyword2"><span class="keyword">assumes</span></span><span class=""> </span><span class="string">&quot;sub &#8810; r&quot;</span><span class="">
</span><span class="">      </span><span class="keyword2"><span class="keyword">and</span></span><span class=""> </span><span class="string">&quot;sub &#8712; &#10214;c<span class="hidden">&#8681;</span><sub>1</sub> implies c<span class="hidden">&#8681;</span><sub>2</sub>&#10215;<span class="hidden">&#8681;</span><sub>T</sub><span class="hidden">&#8681;</span><sub>E</sub><span class="hidden">&#8681;</span><sub>S</sub><span class="hidden">&#8681;</span><sub>L</sub>&quot;</span><span class="">
</span><span class="">    </span><span class="keyword2"><span class="keyword">shows</span></span><span class=""> </span><span class="string">&quot;r &#8712; &#10214;c<span class="hidden">&#8681;</span><sub>1</sub> implies c<span class="hidden">&#8681;</span><sub>2</sub>&#10215;<span class="hidden">&#8681;</span><sub>T</sub><span class="hidden">&#8681;</span><sub>E</sub><span class="hidden">&#8681;</span><sub>S</sub><span class="hidden">&#8681;</span><sub>L</sub>&quot;</span><span class="">
</span><span class="keyword1"><span class="command">proof</span></span><span class=""> </span><span class="">-</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">from</span></span><span class=""> </span><span class="">assms</span><span class="delimiter">(</span><span class="">1</span><span class="delimiter">)</span><span class=""> </span><span class="">is_subrun_def</span><span class=""> </span><span class="keyword3"><span class="command">obtain</span></span><span class=""> </span><span class="">f</span><span class=""> </span><span class="keyword2"><span class="keyword">where</span></span><span class=""> </span><span class="string">&quot;dilating f sub r&quot;</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">blast</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">moreover</span></span><span class=""> </span><span class="keyword1"><span class="command">from</span></span><span class=""> </span><span class="">assms</span><span class="delimiter">(</span><span class="">2</span><span class="delimiter">)</span><span class=""> </span><span class="keyword1"><span class="command">have</span></span><span class="">
</span><span class="">    </span><span class="string">&quot;sub &#8712; {r. &#8704;n. hamlet ((Rep_run r) n c<span class="hidden">&#8681;</span><sub>1</sub>) &#10230; hamlet ((Rep_run r) n c<span class="hidden">&#8681;</span><sub>2</sub>)}&quot;</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">hence</span></span><span class=""> </span><span class="string">&quot;&#8704;n. hamlet ((Rep_run sub) n c<span class="hidden">&#8681;</span><sub>1</sub>) &#10230; hamlet ((Rep_run sub) n c<span class="hidden">&#8681;</span><sub>2</sub>)&quot;</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">ultimately</span></span><span class=""> </span><span class="keyword1"><span class="command">have</span></span><span class=""> </span><span class="string">&quot;&#8704;n. hamlet ((Rep_run r) n c<span class="hidden">&#8681;</span><sub>1</sub>) &#10230; hamlet ((Rep_run r) n c<span class="hidden">&#8681;</span><sub>2</sub>)&quot;</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">ticks_imp_ticks_subk</span><span class=""> </span><span class="">ticks_sub</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">blast</span><span class="">
</span><span class="">  </span><span class="keyword3"><span class="command">thus</span></span><span class=""> </span><span class="var">?thesis</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="keyword1"><span class="command">qed</span></span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command">theorem</span></span><span class=""> </span><span class="">implies_not_sub</span><span class="delimiter">:</span><span class="">
</span><span class="">  </span><span class="keyword2"><span class="keyword">assumes</span></span><span class=""> </span><span class="string">&quot;sub &#8810; r&quot;</span><span class="">
</span><span class="">      </span><span class="keyword2"><span class="keyword">and</span></span><span class=""> </span><span class="string">&quot;sub &#8712; &#10214;c<span class="hidden">&#8681;</span><sub>1</sub> implies not c<span class="hidden">&#8681;</span><sub>2</sub>&#10215;<span class="hidden">&#8681;</span><sub>T</sub><span class="hidden">&#8681;</span><sub>E</sub><span class="hidden">&#8681;</span><sub>S</sub><span class="hidden">&#8681;</span><sub>L</sub>&quot;</span><span class="">
</span><span class="">    </span><span class="keyword2"><span class="keyword">shows</span></span><span class=""> </span><span class="string">&quot;r &#8712; &#10214;c<span class="hidden">&#8681;</span><sub>1</sub> implies not c<span class="hidden">&#8681;</span><sub>2</sub>&#10215;<span class="hidden">&#8681;</span><sub>T</sub><span class="hidden">&#8681;</span><sub>E</sub><span class="hidden">&#8681;</span><sub>S</sub><span class="hidden">&#8681;</span><sub>L</sub>&quot;</span><span class="">
</span><span class="keyword1"><span class="command">proof</span></span><span class=""> </span><span class="">-</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">from</span></span><span class=""> </span><span class="">assms</span><span class="delimiter">(</span><span class="">1</span><span class="delimiter">)</span><span class=""> </span><span class="">is_subrun_def</span><span class=""> </span><span class="keyword3"><span class="command">obtain</span></span><span class=""> </span><span class="">f</span><span class=""> </span><span class="keyword2"><span class="keyword">where</span></span><span class=""> </span><span class="string">&quot;dilating f sub r&quot;</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">blast</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">moreover</span></span><span class=""> </span><span class="keyword1"><span class="command">from</span></span><span class=""> </span><span class="">assms</span><span class="delimiter">(</span><span class="">2</span><span class="delimiter">)</span><span class=""> </span><span class="keyword1"><span class="command">have</span></span><span class="">
</span><span class="">    </span><span class="string">&quot;sub &#8712; {r. &#8704;n. hamlet ((Rep_run r) n c<span class="hidden">&#8681;</span><sub>1</sub>) &#10230; &#172; hamlet ((Rep_run r) n c<span class="hidden">&#8681;</span><sub>2</sub>)}&quot;</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">hence</span></span><span class=""> </span><span class="string">&quot;&#8704;n. hamlet ((Rep_run sub) n c<span class="hidden">&#8681;</span><sub>1</sub>) &#10230; &#172; hamlet ((Rep_run sub) n c<span class="hidden">&#8681;</span><sub>2</sub>)&quot;</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">ultimately</span></span><span class=""> </span><span class="keyword1"><span class="command">have</span></span><span class=""> </span><span class="string">&quot;&#8704;n. hamlet ((Rep_run r) n c<span class="hidden">&#8681;</span><sub>1</sub>) &#10230; &#172; hamlet ((Rep_run r) n c<span class="hidden">&#8681;</span><sub>2</sub>)&quot;</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">ticks_imp_ticks_subk</span><span class=""> </span><span class="">ticks_sub</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">blast</span><span class="">
</span><span class="">  </span><span class="keyword3"><span class="command">thus</span></span><span class=""> </span><span class="var">?thesis</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="keyword1"><span class="command">qed</span></span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command">text</span></span><span class=""> </span><span class="verbatim">{*
  Precedence relations are preserved in a dilated run.
*}</span><span class="">
</span><span class="keyword1"><span class="command">theorem</span></span><span class=""> </span><span class="">weakly_precedes_sub</span><span class="delimiter">:</span><span class="">
</span><span class="">  </span><span class="keyword2"><span class="keyword">assumes</span></span><span class=""> </span><span class="string">&quot;sub &#8810; r&quot;</span><span class="">
</span><span class="">      </span><span class="keyword2"><span class="keyword">and</span></span><span class=""> </span><span class="string">&quot;sub &#8712; &#10214;c<span class="hidden">&#8681;</span><sub>1</sub> weakly precedes c<span class="hidden">&#8681;</span><sub>2</sub>&#10215;<span class="hidden">&#8681;</span><sub>T</sub><span class="hidden">&#8681;</span><sub>E</sub><span class="hidden">&#8681;</span><sub>S</sub><span class="hidden">&#8681;</span><sub>L</sub>&quot;</span><span class="">
</span><span class="">    </span><span class="keyword2"><span class="keyword">shows</span></span><span class=""> </span><span class="string">&quot;r &#8712; &#10214;c<span class="hidden">&#8681;</span><sub>1</sub> weakly precedes c<span class="hidden">&#8681;</span><sub>2</sub>&#10215;<span class="hidden">&#8681;</span><sub>T</sub><span class="hidden">&#8681;</span><sub>E</sub><span class="hidden">&#8681;</span><sub>S</sub><span class="hidden">&#8681;</span><sub>L</sub>&quot;</span><span class="">
</span><span class="keyword1"><span class="command">proof</span></span><span class=""> </span><span class="">-</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">from</span></span><span class=""> </span><span class="">assms</span><span class="delimiter">(</span><span class="">1</span><span class="delimiter">)</span><span class=""> </span><span class="">is_subrun_def</span><span class=""> </span><span class="keyword3"><span class="command">obtain</span></span><span class=""> </span><span class="">f</span><span class=""> </span><span class="keyword2"><span class="keyword">where</span></span><span class=""> </span><span class="">*</span><span class="delimiter">:</span><span class="string">&quot;dilating f sub r&quot;</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">blast</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">from</span></span><span class=""> </span><span class="">assms</span><span class="delimiter">(</span><span class="">2</span><span class="delimiter">)</span><span class=""> </span><span class="keyword1"><span class="command">have</span></span><span class="">
</span><span class="">    </span><span class="string">&quot;sub &#8712; {r. &#8704;n. (run_tick_count r c<span class="hidden">&#8681;</span><sub>2</sub> n) &#8804; (run_tick_count r c<span class="hidden">&#8681;</span><sub>1</sub> n)}&quot;</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">hence</span></span><span class=""> </span><span class="string">&quot;&#8704;n. (run_tick_count sub c<span class="hidden">&#8681;</span><sub>2</sub> n) &#8804; (run_tick_count sub c<span class="hidden">&#8681;</span><sub>1</sub> n)&quot;</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">from</span></span><span class=""> </span><span class="">dil_tick_count</span><span class="delimiter">[</span><span class="">OF</span><span class=""> </span><span class="">assms</span><span class="delimiter">(</span><span class="">1</span><span class="delimiter">)</span><span class=""> </span><span class="">this</span><span class="delimiter">]</span><span class=""> </span><span class="keyword1"><span class="command">have</span></span><span class=""> </span><span class="string">&quot;&#8704;n. (run_tick_count r c<span class="hidden">&#8681;</span><sub>2</sub> n) &#8804; (run_tick_count r c<span class="hidden">&#8681;</span><sub>1</sub> n)&quot;</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">  </span><span class="keyword3"><span class="command">thus</span></span><span class=""> </span><span class="var">?thesis</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="keyword1"><span class="command">qed</span></span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command">theorem</span></span><span class=""> </span><span class="">strictly_precedes_sub2</span><span class="delimiter">:</span><span class="">
</span><span class="">  </span><span class="keyword2"><span class="keyword">assumes</span></span><span class=""> </span><span class="string">&quot;sub &#8810; r&quot;</span><span class="">
</span><span class="">      </span><span class="keyword2"><span class="keyword">and</span></span><span class=""> </span><span class="string">&quot;sub &#8712; &#10214;c<span class="hidden">&#8681;</span><sub>1</sub> strictly precedes c<span class="hidden">&#8681;</span><sub>2</sub>&#10215;<span class="hidden">&#8681;</span><sub>T</sub><span class="hidden">&#8681;</span><sub>E</sub><span class="hidden">&#8681;</span><sub>S</sub><span class="hidden">&#8681;</span><sub>L</sub>&quot;</span><span class="">
</span><span class="">    </span><span class="keyword2"><span class="keyword">shows</span></span><span class=""> </span><span class="string">&quot;r &#8712; &#10214;c<span class="hidden">&#8681;</span><sub>1</sub> strictly precedes c<span class="hidden">&#8681;</span><sub>2</sub>&#10215;<span class="hidden">&#8681;</span><sub>T</sub><span class="hidden">&#8681;</span><sub>E</sub><span class="hidden">&#8681;</span><sub>S</sub><span class="hidden">&#8681;</span><sub>L</sub>&quot;</span><span class="">
</span><span class="keyword1"><span class="command">proof</span></span><span class=""> </span><span class="">-</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">from</span></span><span class=""> </span><span class="">assms</span><span class="delimiter">(</span><span class="">1</span><span class="delimiter">)</span><span class=""> </span><span class="">is_subrun_def</span><span class=""> </span><span class="keyword3"><span class="command">obtain</span></span><span class=""> </span><span class="">f</span><span class=""> </span><span class="keyword2"><span class="keyword">where</span></span><span class=""> </span><span class="">*</span><span class="delimiter">:</span><span class="string">&quot;dilating f sub r&quot;</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">blast</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">from</span></span><span class=""> </span><span class="">assms</span><span class="delimiter">(</span><span class="">2</span><span class="delimiter">)</span><span class=""> </span><span class="keyword1"><span class="command">have</span></span><span class=""> </span><span class="string">&quot;sub &#8712; { &#961;. &#8704;n::nat. (run_tick_count &#961; c<span class="hidden">&#8681;</span><sub>2</sub> n) &#8804; (run_tick_count_strictly &#961; c<span class="hidden">&#8681;</span><sub>1</sub> n) }&quot;</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">with</span></span><span class=""> </span><span class="">strictly_precedes_alt_def2</span><span class="delimiter">[</span><span class="">of</span><span class=""> </span><span class="string">&quot;c<span class="hidden">&#8681;</span><sub>2</sub>&quot;</span><span class=""> </span><span class="string">&quot;c<span class="hidden">&#8681;</span><sub>1</sub>&quot;</span><span class="delimiter">]</span><span class="">  </span><span class="keyword1"><span class="command">have</span></span><span class="">
</span><span class="">    </span><span class="string">&quot;sub &#8712; { &#961;. (&#172;hamlet ((Rep_run &#961;) 0 c<span class="hidden">&#8681;</span><sub>2</sub>)) &#8743; (&#8704;n::nat. (run_tick_count &#961; c<span class="hidden">&#8681;</span><sub>2</sub> (Suc n)) &#8804; (run_tick_count &#961; c<span class="hidden">&#8681;</span><sub>1</sub> n)) }&quot;</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">blast</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">hence</span></span><span class=""> </span><span class="string">&quot;(&#172;hamlet ((Rep_run sub) 0 c<span class="hidden">&#8681;</span><sub>2</sub>)) &#8743; (&#8704;n::nat. (run_tick_count sub c<span class="hidden">&#8681;</span><sub>2</sub> (Suc n)) &#8804; (run_tick_count sub c<span class="hidden">&#8681;</span><sub>1</sub> n))&quot;</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">hence</span></span><span class="">
</span><span class="">    </span><span class="">1</span><span class="delimiter">:</span><span class="string">&quot;(&#172;hamlet ((Rep_run sub) 0 c<span class="hidden">&#8681;</span><sub>2</sub>)) &#8743; (&#8704;n::nat. (tick_count sub c<span class="hidden">&#8681;</span><sub>2</sub> (Suc n)) &#8804; (tick_count sub c<span class="hidden">&#8681;</span><sub>1</sub> n))&quot;</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class=""> </span><span class="">tick_count_is_fun</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">have</span></span><span class=""> </span><span class="string">&quot;&#8704;n::nat. (tick_count r c<span class="hidden">&#8681;</span><sub>2</sub> (Suc n)) &#8804; (tick_count r c<span class="hidden">&#8681;</span><sub>1</sub> n)&quot;</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">proof</span></span><span class=""> </span><span class="">-</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command">{</span></span><span class=""> </span><span class="keyword3"><span class="command">fix</span></span><span class=""> </span><span class="">n</span><span class="delimiter">::</span><span class="">nat</span><span class="">
</span><span class="">      </span><span class="keyword1"><span class="command">have</span></span><span class=""> </span><span class="string">&quot;tick_count r c<span class="hidden">&#8681;</span><sub>2</sub> (Suc n) &#8804; tick_count r c<span class="hidden">&#8681;</span><sub>1</sub> n&quot;</span><span class="">
</span><span class="">      </span><span class="keyword1"><span class="command">proof</span></span><span class=""> </span><span class="delimiter">(</span><span class="">cases</span><span class=""> </span><span class="string">&quot;&#8707;n<span class="hidden">&#8681;</span><sub>0</sub>. f n<span class="hidden">&#8681;</span><sub>0</sub> = n&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">        </span><span class="keyword3"><span class="command">case</span></span><span class=""> </span><span class="">True</span><span class=""> </span><span class="comment">(* n is in the image of f *)</span><span class="">
</span><span class="">          </span><span class="keyword1"><span class="command">from</span></span><span class=""> </span><span class="">this</span><span class=""> </span><span class="keyword3"><span class="command">obtain</span></span><span class=""> </span><span class="">n<span class="hidden">&#8681;</span><sub>0</sub></span><span class=""> </span><span class="keyword2"><span class="keyword">where</span></span><span class=""> </span><span class="">fn</span><span class="delimiter">:</span><span class="string">&quot;f n<span class="hidden">&#8681;</span><sub>0</sub> = n&quot;</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">blast</span><span class="">
</span><span class="">          </span><span class="keyword3"><span class="command">show</span></span><span class=""> </span><span class="var">?thesis</span><span class="">
</span><span class="">          </span><span class="keyword1"><span class="command">proof</span></span><span class=""> </span><span class="delimiter">(</span><span class="">cases</span><span class=""> </span><span class="string">&quot;&#8707;sn<span class="hidden">&#8681;</span><sub>0</sub>. f sn<span class="hidden">&#8681;</span><sub>0</sub> = Suc n&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">            </span><span class="keyword3"><span class="command">case</span></span><span class=""> </span><span class="">True</span><span class=""> </span><span class="comment">(* Suc n is in the image of f *)</span><span class="">
</span><span class="">              </span><span class="keyword1"><span class="command">from</span></span><span class=""> </span><span class="">this</span><span class=""> </span><span class="keyword3"><span class="command">obtain</span></span><span class=""> </span><span class="">sn<span class="hidden">&#8681;</span><sub>0</sub></span><span class=""> </span><span class="keyword2"><span class="keyword">where</span></span><span class=""> </span><span class="">fsn</span><span class="delimiter">:</span><span class="string">&quot;f sn<span class="hidden">&#8681;</span><sub>0</sub> = Suc n&quot;</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">blast</span><span class="">
</span><span class="">              </span><span class="keyword1"><span class="command">with</span></span><span class=""> </span><span class="">fn</span><span class=""> </span><span class="keyword1"><span class="command">have</span></span><span class=""> </span><span class="string">&quot;sn<span class="hidden">&#8681;</span><sub>0</sub> = Suc n<span class="hidden">&#8681;</span><sub>0</sub>&quot;</span><span class=""> </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">strict_mono_suc</span><span class=""> </span><span class="">*</span><span class=""> </span><span class="">dilating_def</span><span class=""> </span><span class="">dilating_fun_def</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">blast</span><span class="">
</span><span class="">              </span><span class="keyword1"><span class="command">with</span></span><span class=""> </span><span class="">1</span><span class=""> </span><span class="keyword1"><span class="command">have</span></span><span class=""> </span><span class="string">&quot;tick_count sub c<span class="hidden">&#8681;</span><sub>2</sub> sn<span class="hidden">&#8681;</span><sub>0</sub> &#8804; tick_count sub c<span class="hidden">&#8681;</span><sub>1</sub> n<span class="hidden">&#8681;</span><sub>0</sub>&quot;</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">              </span><span class="keyword3"><span class="command">thus</span></span><span class=""> </span><span class="var">?thesis</span><span class=""> </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">fn</span><span class=""> </span><span class="">fsn</span><span class=""> </span><span class="">tick_count_sub</span><span class="delimiter">[</span><span class="">OF</span><span class=""> </span><span class="">*</span><span class="delimiter">]</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">          </span><span class="keyword1"><span class="command">next</span></span><span class="">
</span><span class="">            </span><span class="keyword3"><span class="command">case</span></span><span class=""> </span><span class="">False</span><span class=""> </span><span class="comment">(* Suc n is not in the image of f *)</span><span class="">
</span><span class="">              </span><span class="keyword1"><span class="command">hence</span></span><span class=""> </span><span class="string">&quot;&#172;hamlet ((Rep_run r) (Suc n) c<span class="hidden">&#8681;</span><sub>2</sub>)&quot;</span><span class="">
</span><span class="">                </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">*</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class=""> </span><span class="">dilating_def</span><span class=""> </span><span class="">dilating_fun_def</span><span class="delimiter">)</span><span class="">
</span><span class="">              </span><span class="keyword1"><span class="command">hence</span></span><span class=""> </span><span class="string">&quot;tick_count r c<span class="hidden">&#8681;</span><sub>2</sub> (Suc n) = tick_count r c<span class="hidden">&#8681;</span><sub>2</sub> n&quot;</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class=""> </span><span class="">tick_count_suc</span><span class="delimiter">)</span><span class="">
</span><span class="">              </span><span class="keyword1"><span class="command">also</span></span><span class=""> </span><span class="keyword1"><span class="command">have</span></span><span class=""> </span><span class="string">&quot;... = tick_count sub c<span class="hidden">&#8681;</span><sub>2</sub> n<span class="hidden">&#8681;</span><sub>0</sub>&quot;</span><span class=""> </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">fn</span><span class=""> </span><span class="">tick_count_sub</span><span class="delimiter">[</span><span class="">OF</span><span class=""> </span><span class="">*</span><span class="delimiter">]</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">              </span><span class="keyword1"><span class="command">finally</span></span><span class=""> </span><span class="keyword1"><span class="command">have</span></span><span class=""> </span><span class="string">&quot;tick_count r c<span class="hidden">&#8681;</span><sub>2</sub> (Suc n) = tick_count sub c<span class="hidden">&#8681;</span><sub>2</sub> n<span class="hidden">&#8681;</span><sub>0</sub>&quot;</span><span class=""> </span><span class="keyword1"><span class="command">.</span></span><span class="">
</span><span class="">              </span><span class="keyword1"><span class="command">moreover</span></span><span class=""> </span><span class="keyword1"><span class="command">have</span></span><span class=""> </span><span class="string">&quot;tick_count sub c<span class="hidden">&#8681;</span><sub>2</sub> n<span class="hidden">&#8681;</span><sub>0</sub> &#8804; tick_count sub c<span class="hidden">&#8681;</span><sub>2</sub> (Suc n<span class="hidden">&#8681;</span><sub>0</sub>)&quot;</span><span class="">
</span><span class="">                </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class=""> </span><span class="">tick_count_suc</span><span class="delimiter">)</span><span class="">
</span><span class="">              </span><span class="keyword1"><span class="command">ultimately</span></span><span class=""> </span><span class="keyword1"><span class="command">have</span></span><span class=""> </span><span class="string">&quot;tick_count r c<span class="hidden">&#8681;</span><sub>2</sub> (Suc n) &#8804; tick_count sub c<span class="hidden">&#8681;</span><sub>2</sub> (Suc n<span class="hidden">&#8681;</span><sub>0</sub>)&quot;</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">              </span><span class="keyword1"><span class="command">moreover</span></span><span class=""> </span><span class="keyword1"><span class="command">have</span></span><span class=""> </span><span class="string">&quot;tick_count sub c<span class="hidden">&#8681;</span><sub>2</sub> (Suc n<span class="hidden">&#8681;</span><sub>0</sub>) &#8804; tick_count sub c<span class="hidden">&#8681;</span><sub>1</sub> n<span class="hidden">&#8681;</span><sub>0</sub>&quot;</span><span class=""> </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">1</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">              </span><span class="keyword1"><span class="command">ultimately</span></span><span class=""> </span><span class="keyword1"><span class="command">have</span></span><span class=""> </span><span class="string">&quot;tick_count r c<span class="hidden">&#8681;</span><sub>2</sub> (Suc n) &#8804; tick_count sub c<span class="hidden">&#8681;</span><sub>1</sub> n<span class="hidden">&#8681;</span><sub>0</sub>&quot;</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">              </span><span class="keyword3"><span class="command">thus</span></span><span class=""> </span><span class="var">?thesis</span><span class=""> </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">tick_count_sub</span><span class="delimiter">[</span><span class="">OF</span><span class=""> </span><span class="">*</span><span class="delimiter">]</span><span class=""> </span><span class="">fn</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">          </span><span class="keyword1"><span class="command">qed</span></span><span class="">
</span><span class="">      </span><span class="keyword1"><span class="command">next</span></span><span class="">
</span><span class="">        </span><span class="keyword3"><span class="command">case</span></span><span class=""> </span><span class="">False</span><span class=""> </span><span class="comment">(* n is not in the image of f *)</span><span class="">
</span><span class="">          </span><span class="keyword1"><span class="command">from</span></span><span class=""> </span><span class="">greatest_prev_image</span><span class="delimiter">[</span><span class="">OF</span><span class=""> </span><span class="">*</span><span class=""> </span><span class="">this</span><span class="delimiter">]</span><span class=""> </span><span class="keyword3"><span class="command">obtain</span></span><span class=""> </span><span class="">n<span class="hidden">&#8681;</span><sub>p</sub></span><span class="">
</span><span class="">            </span><span class="keyword2"><span class="keyword">where</span></span><span class=""> </span><span class="">np_prop</span><span class="delimiter">:</span><span class="string">&quot;f n<span class="hidden">&#8681;</span><sub>p</sub> &lt; n &#8743; (&#8704;k. f n<span class="hidden">&#8681;</span><sub>p</sub> &lt; k &#8743; k &#8804; n &#10230; (&#8708;k<span class="hidden">&#8681;</span><sub>0</sub>. f k<span class="hidden">&#8681;</span><sub>0</sub> = k))&quot;</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">blast</span><span class="">
</span><span class="">          </span><span class="keyword1"><span class="command">from</span></span><span class=""> </span><span class="">tick_count_latest</span><span class="delimiter">[</span><span class="">OF</span><span class=""> </span><span class="">*</span><span class=""> </span><span class="">this</span><span class="delimiter">]</span><span class=""> </span><span class="keyword1"><span class="command">have</span></span><span class=""> </span><span class="string">&quot;tick_count r c<span class="hidden">&#8681;</span><sub>1</sub> n = tick_count r c<span class="hidden">&#8681;</span><sub>1</sub> (f n<span class="hidden">&#8681;</span><sub>p</sub>)&quot;</span><span class=""> </span><span class="keyword1"><span class="command">.</span></span><span class=""> 
</span><span class="">          </span><span class="keyword1"><span class="command">hence</span></span><span class=""> </span><span class="">a</span><span class="delimiter">:</span><span class="string">&quot;tick_count r c<span class="hidden">&#8681;</span><sub>1</sub> n = tick_count sub c<span class="hidden">&#8681;</span><sub>1</sub> n<span class="hidden">&#8681;</span><sub>p</sub>&quot;</span><span class=""> </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">tick_count_sub</span><span class="delimiter">[</span><span class="">OF</span><span class=""> </span><span class="">*</span><span class="delimiter">]</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">          </span><span class="keyword1"><span class="command">have</span></span><span class=""> </span><span class="">b</span><span class="delimiter">:</span><span class=""> </span><span class="string">&quot;tick_count sub c<span class="hidden">&#8681;</span><sub>2</sub> (Suc n<span class="hidden">&#8681;</span><sub>p</sub>) &#8804; tick_count sub c<span class="hidden">&#8681;</span><sub>1</sub> n<span class="hidden">&#8681;</span><sub>p</sub>&quot;</span><span class=""> </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">1</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">          </span><span class="keyword3"><span class="command">show</span></span><span class=""> </span><span class="var">?thesis</span><span class="">
</span><span class="">          </span><span class="keyword1"><span class="command">proof</span></span><span class=""> </span><span class="delimiter">(</span><span class="">cases</span><span class=""> </span><span class="string">&quot;&#8707;sn<span class="hidden">&#8681;</span><sub>0</sub>. f sn<span class="hidden">&#8681;</span><sub>0</sub> = Suc n&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">            </span><span class="keyword3"><span class="command">case</span></span><span class=""> </span><span class="">True</span><span class=""> </span><span class="comment">(* Suc n is in the image of f *)</span><span class="">
</span><span class="">              </span><span class="keyword1"><span class="command">from</span></span><span class=""> </span><span class="">this</span><span class=""> </span><span class="keyword3"><span class="command">obtain</span></span><span class=""> </span><span class="">sn<span class="hidden">&#8681;</span><sub>0</sub></span><span class=""> </span><span class="keyword2"><span class="keyword">where</span></span><span class=""> </span><span class="">fsn</span><span class="delimiter">:</span><span class="string">&quot;f sn<span class="hidden">&#8681;</span><sub>0</sub> = Suc n&quot;</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">blast</span><span class="">
</span><span class="">              </span><span class="keyword1"><span class="command">from</span></span><span class=""> </span><span class="">next_non_stuttering</span><span class="delimiter">[</span><span class="">OF</span><span class=""> </span><span class="">*</span><span class=""> </span><span class="">np_prop</span><span class=""> </span><span class="">this</span><span class="delimiter">]</span><span class="">  </span><span class="keyword1"><span class="command">have</span></span><span class=""> </span><span class="">sn_prop</span><span class="delimiter">:</span><span class="string">&quot;sn<span class="hidden">&#8681;</span><sub>0</sub> = Suc n<span class="hidden">&#8681;</span><sub>p</sub>&quot;</span><span class=""> </span><span class="keyword1"><span class="command">.</span></span><span class="">
</span><span class="">              </span><span class="keyword1"><span class="command">with</span></span><span class=""> </span><span class="">b</span><span class=""> </span><span class="keyword1"><span class="command">have</span></span><span class=""> </span><span class="string">&quot;tick_count sub c<span class="hidden">&#8681;</span><sub>2</sub> sn<span class="hidden">&#8681;</span><sub>0</sub> &#8804; tick_count sub c<span class="hidden">&#8681;</span><sub>1</sub> n<span class="hidden">&#8681;</span><sub>p</sub>&quot;</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">              </span><span class="keyword3"><span class="command">thus</span></span><span class=""> </span><span class="var">?thesis</span><span class=""> </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">tick_count_sub</span><span class="delimiter">[</span><span class="">OF</span><span class=""> </span><span class="">*</span><span class="delimiter">]</span><span class=""> </span><span class="">fsn</span><span class=""> </span><span class="">a</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">auto</span><span class="">
</span><span class="">          </span><span class="keyword1"><span class="command">next</span></span><span class="">
</span><span class="">            </span><span class="keyword3"><span class="command">case</span></span><span class=""> </span><span class="">False</span><span class=""> </span><span class="comment">(* Suc n is not in the image of f *)</span><span class="">
</span><span class="">              </span><span class="keyword1"><span class="command">hence</span></span><span class=""> </span><span class="string">&quot;&#172;hamlet ((Rep_run r) (Suc n) c<span class="hidden">&#8681;</span><sub>2</sub>)&quot;</span><span class="">
</span><span class="">                </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">*</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class=""> </span><span class="">dilating_def</span><span class=""> </span><span class="">dilating_fun_def</span><span class="delimiter">)</span><span class="">
</span><span class="">              </span><span class="keyword1"><span class="command">hence</span></span><span class=""> </span><span class="string">&quot;tick_count r c<span class="hidden">&#8681;</span><sub>2</sub> (Suc n) = tick_count r c<span class="hidden">&#8681;</span><sub>2</sub> n&quot;</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class=""> </span><span class="">tick_count_suc</span><span class="delimiter">)</span><span class="">
</span><span class="">              </span><span class="keyword1"><span class="command">also</span></span><span class=""> </span><span class="keyword1"><span class="command">have</span></span><span class=""> </span><span class="string">&quot;... = tick_count sub c<span class="hidden">&#8681;</span><sub>2</sub> n<span class="hidden">&#8681;</span><sub>p</sub>&quot;</span><span class=""> </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">np_prop</span><span class=""> </span><span class="">tick_count_sub</span><span class="delimiter">[</span><span class="">OF</span><span class=""> </span><span class="">*</span><span class="delimiter">]</span><span class="">
</span><span class="">                </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class=""> </span><span class="">tick_count_latest</span><span class="delimiter">[</span><span class="">OF</span><span class=""> </span><span class="">*</span><span class=""> </span><span class="">np_prop</span><span class="delimiter">]</span><span class="delimiter">)</span><span class="">
</span><span class="">              </span><span class="keyword1"><span class="command">finally</span></span><span class=""> </span><span class="keyword1"><span class="command">have</span></span><span class=""> </span><span class="string">&quot;tick_count r c<span class="hidden">&#8681;</span><sub>2</sub> (Suc n) = tick_count sub c<span class="hidden">&#8681;</span><sub>2</sub> n<span class="hidden">&#8681;</span><sub>p</sub>&quot;</span><span class=""> </span><span class="keyword1"><span class="command">.</span></span><span class="">
</span><span class="">              </span><span class="keyword1"><span class="command">moreover</span></span><span class=""> </span><span class="keyword1"><span class="command">have</span></span><span class=""> </span><span class="string">&quot;tick_count sub c<span class="hidden">&#8681;</span><sub>2</sub> n<span class="hidden">&#8681;</span><sub>p</sub> &#8804; tick_count sub c<span class="hidden">&#8681;</span><sub>2</sub> (Suc n<span class="hidden">&#8681;</span><sub>p</sub>)&quot;</span><span class="">
</span><span class="">                </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class=""> </span><span class="">tick_count_suc</span><span class="delimiter">)</span><span class="">
</span><span class="">              </span><span class="keyword1"><span class="command">ultimately</span></span><span class=""> </span><span class="keyword1"><span class="command">have</span></span><span class=""> </span><span class="string">&quot;tick_count r c<span class="hidden">&#8681;</span><sub>2</sub> (Suc n) &#8804; tick_count sub c<span class="hidden">&#8681;</span><sub>2</sub> (Suc n<span class="hidden">&#8681;</span><sub>p</sub>)&quot;</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">              </span><span class="keyword1"><span class="command">moreover</span></span><span class=""> </span><span class="keyword1"><span class="command">have</span></span><span class=""> </span><span class="string">&quot;tick_count sub c<span class="hidden">&#8681;</span><sub>2</sub> (Suc n<span class="hidden">&#8681;</span><sub>p</sub>) &#8804; tick_count sub c<span class="hidden">&#8681;</span><sub>1</sub> n<span class="hidden">&#8681;</span><sub>p</sub>&quot;</span><span class=""> </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">1</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">              </span><span class="keyword1"><span class="command">ultimately</span></span><span class=""> </span><span class="keyword1"><span class="command">have</span></span><span class=""> </span><span class="string">&quot;tick_count r c<span class="hidden">&#8681;</span><sub>2</sub> (Suc n) &#8804; tick_count sub c<span class="hidden">&#8681;</span><sub>1</sub> n<span class="hidden">&#8681;</span><sub>p</sub>&quot;</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">              </span><span class="keyword3"><span class="command">thus</span></span><span class=""> </span><span class="var">?thesis</span><span class=""> </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">np_prop</span><span class=""> </span><span class="">mono_tick_count</span><span class="">  </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">a</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">linarith</span><span class="">
</span><span class="">          </span><span class="keyword1"><span class="command">qed</span></span><span class="">
</span><span class="">      </span><span class="keyword1"><span class="command">qed</span></span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command">}</span></span><span class=""> </span><span class="keyword3"><span class="command">thus</span></span><span class=""> </span><span class="var">?thesis</span><span class=""> </span><span class="keyword1"><span class="command">..</span></span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">qed</span></span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">moreover</span></span><span class=""> </span><span class="keyword1"><span class="command">from</span></span><span class=""> </span><span class="">1</span><span class=""> </span><span class="keyword1"><span class="command">have</span></span><span class=""> </span><span class="string">&quot;&#172;hamlet ((Rep_run r) 0 c<span class="hidden">&#8681;</span><sub>2</sub>)&quot;</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="string">&quot;*&quot;</span><span class=""> </span><span class="">empty_dilated_prefix</span><span class=""> </span><span class="">ticks_sub</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">fastforce</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">ultimately</span></span><span class=""> </span><span class="keyword3"><span class="command">show</span></span><span class=""> </span><span class="var">?thesis</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class=""> </span><span class="">tick_count_is_fun</span><span class=""> </span><span class="">strictly_precedes_alt_def2</span><span class="delimiter">)</span><span class=""> 
</span><span class="keyword1"><span class="command">qed</span></span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command">text</span></span><span class=""> </span><span class="verbatim">{*
  Time delayed relations are preserved in a dilated run.
*}</span><span class="">
</span><span class="keyword1"><span class="command">theorem</span></span><span class=""> </span><span class="">time_delayed_sub</span><span class="delimiter">:</span><span class="">
</span><span class="">  </span><span class="keyword2"><span class="keyword">assumes</span></span><span class=""> </span><span class="string">&quot;sub &#8810; r&quot;</span><span class="">
</span><span class="">      </span><span class="keyword2"><span class="keyword">and</span></span><span class=""> </span><span class="string">&quot;sub &#8712; &#10214; a time-delayed by &#948;&#964; on ms implies b &#10215;<span class="hidden">&#8681;</span><sub>T</sub><span class="hidden">&#8681;</span><sub>E</sub><span class="hidden">&#8681;</span><sub>S</sub><span class="hidden">&#8681;</span><sub>L</sub>&quot;</span><span class="">
</span><span class="">    </span><span class="keyword2"><span class="keyword">shows</span></span><span class=""> </span><span class="string">&quot;r &#8712; &#10214; a time-delayed by &#948;&#964; on ms implies b &#10215;<span class="hidden">&#8681;</span><sub>T</sub><span class="hidden">&#8681;</span><sub>E</sub><span class="hidden">&#8681;</span><sub>S</sub><span class="hidden">&#8681;</span><sub>L</sub>&quot;</span><span class="">
</span><span class="keyword1"><span class="command">proof</span></span><span class=""> </span><span class="">-</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">from</span></span><span class=""> </span><span class="">assms</span><span class="delimiter">(</span><span class="">1</span><span class="delimiter">)</span><span class=""> </span><span class="">is_subrun_def</span><span class=""> </span><span class="keyword3"><span class="command">obtain</span></span><span class=""> </span><span class="">f</span><span class=""> </span><span class="keyword2"><span class="keyword">where</span></span><span class=""> </span><span class="">*</span><span class="delimiter">:</span><span class="string">&quot;dilating f sub r&quot;</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">blast</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">from</span></span><span class=""> </span><span class="">assms</span><span class="delimiter">(</span><span class="">2</span><span class="delimiter">)</span><span class=""> </span><span class="keyword1"><span class="command">have</span></span><span class=""> </span><span class="string">&quot;&#8704;n. hamlet ((Rep_run sub) n a)
                          &#10230; (&#8707;m &#8805; n. hamlet ((Rep_run sub) m b)
                                    &#8743; time ((Rep_run sub) m ms) =  time ((Rep_run sub) n ms) + &#948;&#964;)&quot;</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">TESL_interpretation_atomic.simps</span><span class="delimiter">(</span><span class="">6</span><span class="delimiter">)</span><span class="delimiter">[</span><span class="">of</span><span class=""> </span><span class="string">&quot;a&quot;</span><span class=""> </span><span class="string">&quot;&#948;&#964;&quot;</span><span class=""> </span><span class="string">&quot;ms&quot;</span><span class=""> </span><span class="string">&quot;b&quot;</span><span class="delimiter">]</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">hence</span></span><span class=""> </span><span class="">**</span><span class="delimiter">:</span><span class="string">&quot;&#8704;n<span class="hidden">&#8681;</span><sub>0</sub>. hamlet ((Rep_run r) (f n<span class="hidden">&#8681;</span><sub>0</sub>) a)
                  &#10230; (&#8707;m<span class="hidden">&#8681;</span><sub>0</sub> &#8805; n<span class="hidden">&#8681;</span><sub>0</sub>. hamlet ((Rep_run r) (f m<span class="hidden">&#8681;</span><sub>0</sub>) b)
                             &#8743;  time ((Rep_run r) (f m<span class="hidden">&#8681;</span><sub>0</sub>) ms) = time ((Rep_run r) (f n<span class="hidden">&#8681;</span><sub>0</sub>) ms) + &#948;&#964;)&quot;</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">*</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class=""> </span><span class="">dilating_def</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">hence</span></span><span class=""> </span><span class="string">&quot;&#8704;n. hamlet ((Rep_run r) n a)
                  &#10230; (&#8707;m &#8805; n. hamlet ((Rep_run r) m b)
                             &#8743; time ((Rep_run r) m ms) = time ((Rep_run r) n ms) + &#948;&#964;)&quot;</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">proof</span></span><span class=""> </span><span class="">-</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command">{</span></span><span class=""> </span><span class="keyword3"><span class="command">fix</span></span><span class=""> </span><span class="">n</span><span class=""> </span><span class="keyword3"><span class="command">assume</span></span><span class=""> </span><span class="">assm</span><span class="delimiter">:</span><span class="string">&quot;hamlet ((Rep_run r) n a)&quot;</span><span class="">
</span><span class="">      </span><span class="keyword1"><span class="command">from</span></span><span class=""> </span><span class="">ticks_image_sub</span><span class="delimiter">[</span><span class="">OF</span><span class=""> </span><span class="">*</span><span class=""> </span><span class="">assm</span><span class="delimiter">]</span><span class=""> </span><span class="keyword3"><span class="command">obtain</span></span><span class=""> </span><span class="">n<span class="hidden">&#8681;</span><sub>0</sub></span><span class=""> </span><span class="keyword2"><span class="keyword">where</span></span><span class=""> </span><span class="">nfn0</span><span class="delimiter">:</span><span class="string">&quot;n = f n<span class="hidden">&#8681;</span><sub>0</sub>&quot;</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">blast</span><span class="">
</span><span class="">      </span><span class="keyword1"><span class="command">with</span></span><span class=""> </span><span class="">**</span><span class=""> </span><span class="">assm</span><span class=""> </span><span class="keyword1"><span class="command">have</span></span><span class="">
</span><span class="">        </span><span class="string">&quot;(&#8707;m<span class="hidden">&#8681;</span><sub>0</sub> &#8805; n<span class="hidden">&#8681;</span><sub>0</sub>. hamlet ((Rep_run r) (f m<span class="hidden">&#8681;</span><sub>0</sub>) b)
               &#8743;  time ((Rep_run r) (f m<span class="hidden">&#8681;</span><sub>0</sub>) ms) = time ((Rep_run r) (f n<span class="hidden">&#8681;</span><sub>0</sub>) ms) + &#948;&#964;)&quot;</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">blast</span><span class="">
</span><span class="">      </span><span class="keyword1"><span class="command">hence</span></span><span class=""> </span><span class="string">&quot;(&#8707;m &#8805; n. hamlet ((Rep_run r) m b)
               &#8743;  time ((Rep_run r) m ms) = time ((Rep_run r) n ms) + &#948;&#964;)&quot;</span><span class="">
</span><span class="">        </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">*</span><span class=""> </span><span class="">nfn0</span><span class=""> </span><span class="">dilating_def</span><span class=""> </span><span class="">dilating_fun_def</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="delimiter">(</span><span class="">metis</span><span class=""> </span><span class="">strict_mono_less_eq</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command">}</span></span><span class=""> </span><span class="keyword3"><span class="command">thus</span></span><span class=""> </span><span class="var">?thesis</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">qed</span></span><span class="">
</span><span class="">  </span><span class="keyword3"><span class="command">thus</span></span><span class=""> </span><span class="var">?thesis</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="keyword1"><span class="command">qed</span></span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command">text</span></span><span class=""> </span><span class="verbatim">{*
  Time relations are preserved by contraction
*}</span><span class="">
</span><span class="keyword1"><span class="command">lemma</span></span><span class=""> </span><span class="">tagrel_sub_inv</span><span class="delimiter">:</span><span class="">
</span><span class="">  </span><span class="keyword2"><span class="keyword">assumes</span></span><span class=""> </span><span class="string">&quot;sub &#8810; r&quot;</span><span class="">
</span><span class="">      </span><span class="keyword2"><span class="keyword">and</span></span><span class=""> </span><span class="string">&quot;r &#8712; &#10214; time-relation &#8970;c<span class="hidden">&#8681;</span><sub>1</sub>, c<span class="hidden">&#8681;</span><sub>2</sub>&#8971; &#8712; R &#10215;<span class="hidden">&#8681;</span><sub>T</sub><span class="hidden">&#8681;</span><sub>E</sub><span class="hidden">&#8681;</span><sub>S</sub><span class="hidden">&#8681;</span><sub>L</sub>&quot;</span><span class="">
</span><span class="">    </span><span class="keyword2"><span class="keyword">shows</span></span><span class=""> </span><span class="string">&quot;sub &#8712; &#10214; time-relation &#8970;c<span class="hidden">&#8681;</span><sub>1</sub>, c<span class="hidden">&#8681;</span><sub>2</sub>&#8971; &#8712; R &#10215;<span class="hidden">&#8681;</span><sub>T</sub><span class="hidden">&#8681;</span><sub>E</sub><span class="hidden">&#8681;</span><sub>S</sub><span class="hidden">&#8681;</span><sub>L</sub>&quot;</span><span class="">
</span><span class="keyword1"><span class="command">proof</span></span><span class=""> </span><span class="">-</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">from</span></span><span class=""> </span><span class="">assms</span><span class="delimiter">(</span><span class="">1</span><span class="delimiter">)</span><span class=""> </span><span class="">is_subrun_def</span><span class=""> </span><span class="keyword3"><span class="command">obtain</span></span><span class=""> </span><span class="">f</span><span class=""> </span><span class="keyword2"><span class="keyword">where</span></span><span class=""> </span><span class="">df</span><span class="delimiter">:</span><span class="string">&quot;dilating f sub r&quot;</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">blast</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">moreover</span></span><span class=""> </span><span class="keyword1"><span class="command">from</span></span><span class=""> </span><span class="">assms</span><span class="delimiter">(</span><span class="">2</span><span class="delimiter">)</span><span class=""> </span><span class="">TESL_interpretation_atomic.simps</span><span class="delimiter">(</span><span class="">3</span><span class="delimiter">)</span><span class=""> </span><span class="keyword1"><span class="command">have</span></span><span class="">
</span><span class="">    </span><span class="string">&quot;r &#8712; {&#961;. &#8704;n. R (time ((Rep_run &#961;) n c<span class="hidden">&#8681;</span><sub>1</sub>), time ((Rep_run &#961;) n c<span class="hidden">&#8681;</span><sub>2</sub>))}&quot;</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">blast</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">hence</span></span><span class=""> </span><span class="string">&quot;&#8704;n. R (time ((Rep_run r) n c<span class="hidden">&#8681;</span><sub>1</sub>), time ((Rep_run r) n c<span class="hidden">&#8681;</span><sub>2</sub>))&quot;</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">hence</span></span><span class=""> </span><span class="string">&quot;&#8704;n. (&#8707;n<span class="hidden">&#8681;</span><sub>0</sub>. f n<span class="hidden">&#8681;</span><sub>0</sub> = n) &#10230; R (time ((Rep_run r) n c<span class="hidden">&#8681;</span><sub>1</sub>), time ((Rep_run r) n c<span class="hidden">&#8681;</span><sub>2</sub>))&quot;</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">hence</span></span><span class=""> </span><span class="string">&quot;&#8704;n<span class="hidden">&#8681;</span><sub>0</sub>. R (time ((Rep_run r) (f n<span class="hidden">&#8681;</span><sub>0</sub>) c<span class="hidden">&#8681;</span><sub>1</sub>), time ((Rep_run r) (f n<span class="hidden">&#8681;</span><sub>0</sub>) c<span class="hidden">&#8681;</span><sub>2</sub>))&quot;</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">blast</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">moreover</span></span><span class=""> </span><span class="keyword1"><span class="command">from</span></span><span class=""> </span><span class="">dilating_def</span><span class=""> </span><span class="">df</span><span class=""> </span><span class="keyword1"><span class="command">have</span></span><span class="">
</span><span class="">    </span><span class="string">&quot;&#8704;n c. time ((Rep_run sub) n c) = time ((Rep_run r) (f n) c)&quot;</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">blast</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">ultimately</span></span><span class=""> </span><span class="keyword1"><span class="command">have</span></span><span class=""> </span><span class="string">&quot;&#8704;n<span class="hidden">&#8681;</span><sub>0</sub>. R (time ((Rep_run sub) n<span class="hidden">&#8681;</span><sub>0</sub> c<span class="hidden">&#8681;</span><sub>1</sub>), time ((Rep_run sub) n<span class="hidden">&#8681;</span><sub>0</sub> c<span class="hidden">&#8681;</span><sub>2</sub>))&quot;</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">auto</span><span class="">
</span><span class="">  </span><span class="keyword3"><span class="command">thus</span></span><span class=""> </span><span class="var">?thesis</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="keyword1"><span class="command">qed</span></span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command">text</span></span><span class=""> </span><span class="verbatim">{*
  A time relation is preserved through dilation of a run.
*}</span><span class="">
</span><span class="keyword1"><span class="command">lemma</span></span><span class=""> </span><span class="">tagrel_sub&#39;</span><span class="delimiter">:</span><span class="">
</span><span class="">  </span><span class="keyword2"><span class="keyword">assumes</span></span><span class=""> </span><span class="string">&quot;sub &#8810; r&quot;</span><span class="">
</span><span class="">      </span><span class="keyword2"><span class="keyword">and</span></span><span class=""> </span><span class="string">&quot;sub &#8712; &#10214; time-relation &#8970;c<span class="hidden">&#8681;</span><sub>1</sub>,c<span class="hidden">&#8681;</span><sub>2</sub>&#8971; &#8712; R &#10215;<span class="hidden">&#8681;</span><sub>T</sub><span class="hidden">&#8681;</span><sub>E</sub><span class="hidden">&#8681;</span><sub>S</sub><span class="hidden">&#8681;</span><sub>L</sub>&quot;</span><span class="">
</span><span class="">    </span><span class="keyword2"><span class="keyword">shows</span></span><span class=""> </span><span class="string">&quot;R (time ((Rep_run r) n c<span class="hidden">&#8681;</span><sub>1</sub>), time ((Rep_run r) n c<span class="hidden">&#8681;</span><sub>2</sub>))&quot;</span><span class="">
</span><span class="keyword1"><span class="command">proof</span></span><span class=""> </span><span class="">-</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">from</span></span><span class=""> </span><span class="">assms</span><span class="delimiter">(</span><span class="">1</span><span class="delimiter">)</span><span class=""> </span><span class="">is_subrun_def</span><span class=""> </span><span class="keyword3"><span class="command">obtain</span></span><span class=""> </span><span class="">f</span><span class=""> </span><span class="keyword2"><span class="keyword">where</span></span><span class=""> </span><span class="">*</span><span class="delimiter">:</span><span class="string">&quot;dilating f sub r&quot;</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">blast</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">moreover</span></span><span class=""> </span><span class="keyword1"><span class="command">from</span></span><span class=""> </span><span class="">assms</span><span class="delimiter">(</span><span class="">2</span><span class="delimiter">)</span><span class=""> </span><span class="">TESL_interpretation_atomic.simps</span><span class="delimiter">(</span><span class="">3</span><span class="delimiter">)</span><span class=""> </span><span class="keyword1"><span class="command">have</span></span><span class="">
</span><span class="">    </span><span class="string">&quot;sub &#8712; {r. &#8704;n. R (time ((Rep_run r) n c<span class="hidden">&#8681;</span><sub>1</sub>), time ((Rep_run r) n c<span class="hidden">&#8681;</span><sub>2</sub>))}&quot;</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">blast</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">hence</span></span><span class=""> </span><span class="">1</span><span class="delimiter">:</span><span class="string">&quot;&#8704;n. R (time ((Rep_run sub) n c<span class="hidden">&#8681;</span><sub>1</sub>), time ((Rep_run sub) n c<span class="hidden">&#8681;</span><sub>2</sub>))&quot;</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">  </span><span class="keyword3"><span class="command">show</span></span><span class=""> </span><span class="var">?thesis</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">proof</span></span><span class=""> </span><span class="delimiter">(</span><span class="">induction</span><span class=""> </span><span class="">n</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword3"><span class="command">case</span></span><span class=""> </span><span class="">0</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command">then</span></span><span class=""> </span><span class="keyword3"><span class="command">show</span></span><span class=""> </span><span class="var">?case</span><span class="">
</span><span class="">      </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="delimiter">(</span><span class="">metis</span><span class=""> </span><span class="delimiter">(</span><span class="">no_types</span><span class="delimiter">,</span><span class=""> </span><span class="">lifting</span><span class="delimiter">)</span><span class=""> </span><span class="string">&quot;1&quot;</span><span class=""> </span><span class="">calculation</span><span class=""> </span><span class="">dilating_def</span><span class=""> </span><span class="">dilating_fun_def</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">next</span></span><span class="">
</span><span class="">    </span><span class="keyword3"><span class="command">case</span></span><span class=""> </span><span class="delimiter">(</span><span class="">Suc</span><span class=""> </span><span class="">n</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command">then</span></span><span class=""> </span><span class="keyword3"><span class="command">show</span></span><span class=""> </span><span class="var">?case</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command">proof</span></span><span class=""> </span><span class="delimiter">(</span><span class="">cases</span><span class=""> </span><span class="string">&quot;&#8708;n<span class="hidden">&#8681;</span><sub>0</sub>. f n<span class="hidden">&#8681;</span><sub>0</sub> = Suc n&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">      </span><span class="keyword3"><span class="command">case</span></span><span class=""> </span><span class="">True</span><span class="">
</span><span class="">        </span><span class="keyword3"><span class="command">thus</span></span><span class=""> </span><span class="var">?thesis</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="delimiter">(</span><span class="">metis</span><span class=""> </span><span class="">Suc.IH</span><span class=""> </span><span class="">calculation</span><span class=""> </span><span class="">dilating_def</span><span class=""> </span><span class="">dilating_fun_def</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command">next</span></span><span class="">
</span><span class="">      </span><span class="keyword3"><span class="command">case</span></span><span class=""> </span><span class="">False</span><span class="">
</span><span class="">      </span><span class="keyword1"><span class="command">from</span></span><span class=""> </span><span class="">this</span><span class=""> </span><span class="keyword3"><span class="command">obtain</span></span><span class=""> </span><span class="">n<span class="hidden">&#8681;</span><sub>0</sub></span><span class=""> </span><span class="keyword2"><span class="keyword">where</span></span><span class=""> </span><span class="">n<span class="hidden">&#8681;</span><sub>0</sub>prop</span><span class="delimiter">:</span><span class="string">&quot;f n<span class="hidden">&#8681;</span><sub>0</sub> = Suc n&quot;</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">blast</span><span class="">
</span><span class="">      </span><span class="keyword1"><span class="command">from</span></span><span class=""> </span><span class="">1</span><span class=""> </span><span class="keyword1"><span class="command">have</span></span><span class=""> </span><span class="string">&quot;R (time ((Rep_run sub) n<span class="hidden">&#8681;</span><sub>0</sub> c<span class="hidden">&#8681;</span><sub>1</sub>), time ((Rep_run sub) n<span class="hidden">&#8681;</span><sub>0</sub> c<span class="hidden">&#8681;</span><sub>2</sub>))&quot;</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">      </span><span class="keyword1"><span class="command">moreover</span></span><span class=""> </span><span class="keyword1"><span class="command">from</span></span><span class=""> </span><span class="">n<span class="hidden">&#8681;</span><sub>0</sub>prop</span><span class=""> </span><span class="">*</span><span class=""> </span><span class="keyword1"><span class="command">have</span></span><span class=""> </span><span class="string">&quot;time ((Rep_run sub) n<span class="hidden">&#8681;</span><sub>0</sub> c<span class="hidden">&#8681;</span><sub>1</sub>) = time ((Rep_run r) (Suc n) c<span class="hidden">&#8681;</span><sub>1</sub>)&quot;</span><span class="">
</span><span class="">        </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class=""> </span><span class="">dilating_def</span><span class="delimiter">)</span><span class="">
</span><span class="">      </span><span class="keyword1"><span class="command">moreover</span></span><span class=""> </span><span class="keyword1"><span class="command">from</span></span><span class=""> </span><span class="">n<span class="hidden">&#8681;</span><sub>0</sub>prop</span><span class=""> </span><span class="">*</span><span class=""> </span><span class="keyword1"><span class="command">have</span></span><span class=""> </span><span class="string">&quot;time ((Rep_run sub) n<span class="hidden">&#8681;</span><sub>0</sub> c<span class="hidden">&#8681;</span><sub>2</sub>) = time ((Rep_run r) (Suc n) c<span class="hidden">&#8681;</span><sub>2</sub>)&quot;</span><span class="">
</span><span class="">        </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class=""> </span><span class="">dilating_def</span><span class="delimiter">)</span><span class="">
</span><span class="">      </span><span class="keyword1"><span class="command">ultimately</span></span><span class=""> </span><span class="keyword3"><span class="command">show</span></span><span class=""> </span><span class="var">?thesis</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command">qed</span></span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">qed</span></span><span class="">
</span><span class="keyword1"><span class="command">qed</span></span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command">corollary</span></span><span class=""> </span><span class="">tagrel_sub</span><span class="delimiter">:</span><span class="">
</span><span class="">  </span><span class="keyword2"><span class="keyword">assumes</span></span><span class=""> </span><span class="string">&quot;sub &#8810; r&quot;</span><span class="">
</span><span class="">      </span><span class="keyword2"><span class="keyword">and</span></span><span class=""> </span><span class="string">&quot;sub &#8712; &#10214; time-relation &#8970;c<span class="hidden">&#8681;</span><sub>1</sub>,c<span class="hidden">&#8681;</span><sub>2</sub>&#8971; &#8712; R &#10215;<span class="hidden">&#8681;</span><sub>T</sub><span class="hidden">&#8681;</span><sub>E</sub><span class="hidden">&#8681;</span><sub>S</sub><span class="hidden">&#8681;</span><sub>L</sub>&quot;</span><span class="">
</span><span class="">    </span><span class="keyword2"><span class="keyword">shows</span></span><span class=""> </span><span class="string">&quot;r &#8712; &#10214; time-relation &#8970;c<span class="hidden">&#8681;</span><sub>1</sub>,c<span class="hidden">&#8681;</span><sub>2</sub>&#8971; &#8712; R &#10215;<span class="hidden">&#8681;</span><sub>T</sub><span class="hidden">&#8681;</span><sub>E</sub><span class="hidden">&#8681;</span><sub>S</sub><span class="hidden">&#8681;</span><sub>L</sub>&quot;</span><span class="">
</span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">tagrel_sub&#39;</span><span class="delimiter">[</span><span class="">OF</span><span class=""> </span><span class="">assms</span><span class="delimiter">]</span><span class=""> </span><span class="keyword1"><span class="command">unfolding</span></span><span class=""> </span><span class="">TESL_interpretation_atomic.simps</span><span class="delimiter">(</span><span class="">3</span><span class="delimiter">)</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command">theorem</span></span><span class=""> </span><span class="">kill_sub</span><span class="delimiter">:</span><span class="">
</span><span class="">  </span><span class="keyword2"><span class="keyword">assumes</span></span><span class=""> </span><span class="string">&quot;sub &#8810; r&quot;</span><span class="">
</span><span class="">      </span><span class="keyword2"><span class="keyword">and</span></span><span class=""> </span><span class="string">&quot;sub &#8712; &#10214; c<span class="hidden">&#8681;</span><sub>1</sub> kills c<span class="hidden">&#8681;</span><sub>2</sub> &#10215;<span class="hidden">&#8681;</span><sub>T</sub><span class="hidden">&#8681;</span><sub>E</sub><span class="hidden">&#8681;</span><sub>S</sub><span class="hidden">&#8681;</span><sub>L</sub>&quot;</span><span class="">
</span><span class="">    </span><span class="keyword2"><span class="keyword">shows</span></span><span class=""> </span><span class="string">&quot;r &#8712; &#10214; c<span class="hidden">&#8681;</span><sub>1</sub> kills c<span class="hidden">&#8681;</span><sub>2</sub> &#10215;<span class="hidden">&#8681;</span><sub>T</sub><span class="hidden">&#8681;</span><sub>E</sub><span class="hidden">&#8681;</span><sub>S</sub><span class="hidden">&#8681;</span><sub>L</sub>&quot;</span><span class="">
</span><span class="keyword1"><span class="command">proof</span></span><span class=""> </span><span class="">-</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">from</span></span><span class=""> </span><span class="">assms</span><span class="delimiter">(</span><span class="">1</span><span class="delimiter">)</span><span class=""> </span><span class="">is_subrun_def</span><span class=""> </span><span class="keyword3"><span class="command">obtain</span></span><span class=""> </span><span class="">f</span><span class=""> </span><span class="keyword2"><span class="keyword">where</span></span><span class=""> </span><span class="">*</span><span class="delimiter">:</span><span class="string">&quot;dilating f sub r&quot;</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">blast</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">from</span></span><span class=""> </span><span class="">assms</span><span class="delimiter">(</span><span class="">2</span><span class="delimiter">)</span><span class=""> </span><span class="">TESL_interpretation_atomic.simps</span><span class="delimiter">(</span><span class="">9</span><span class="delimiter">)</span><span class=""> </span><span class="keyword1"><span class="command">have</span></span><span class="">
</span><span class="">    </span><span class="string">&quot;&#8704;n. hamlet (Rep_run sub n c<span class="hidden">&#8681;</span><sub>1</sub>) &#10230; (&#8704;m&#8805;n. &#172; hamlet (Rep_run sub m c<span class="hidden">&#8681;</span><sub>2</sub>))&quot;</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">hence</span></span><span class=""> </span><span class="string">&quot;&#8704;n. hamlet (Rep_run r (f n) c<span class="hidden">&#8681;</span><sub>1</sub>) &#10230; (&#8704;m&#8805;n. &#172; hamlet (Rep_run r (f m) c<span class="hidden">&#8681;</span><sub>2</sub>))&quot;</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">ticks_sub</span><span class="delimiter">[</span><span class="">OF</span><span class=""> </span><span class="">*</span><span class="delimiter">]</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">hence</span></span><span class=""> </span><span class="string">&quot;&#8704;n. hamlet (Rep_run r (f n) c<span class="hidden">&#8681;</span><sub>1</sub>) &#10230; (&#8704;m&#8805; (f n). &#172; hamlet (Rep_run r m c<span class="hidden">&#8681;</span><sub>2</sub>))&quot;</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="delimiter">(</span><span class="">metis</span><span class=""> </span><span class="string">&quot;*&quot;</span><span class=""> </span><span class="">dilating_def</span><span class=""> </span><span class="">dilating_fun_def</span><span class=""> </span><span class="">strict_mono_less_eq</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">hence</span></span><span class=""> </span><span class="string">&quot;&#8704;n. hamlet (Rep_run r n c<span class="hidden">&#8681;</span><sub>1</sub>) &#10230; (&#8704;m &#8805; n. &#172; hamlet (Rep_run r m c<span class="hidden">&#8681;</span><sub>2</sub>))&quot;</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">ticks_imp_ticks_subk</span><span class="delimiter">[</span><span class="">OF</span><span class=""> </span><span class="">*</span><span class="delimiter">]</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">blast</span><span class="">
</span><span class="">  </span><span class="keyword3"><span class="command">thus</span></span><span class=""> </span><span class="var">?thesis</span><span class=""> </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">TESL_interpretation_atomic.simps</span><span class="delimiter">(</span><span class="">9</span><span class="delimiter">)</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">blast</span><span class="">
</span><span class="keyword1"><span class="command">qed</span></span><span class="">
</span><span class="">
</span><span class="keyword2"><span class="keyword">end</span></span><span class="">
</span></pre>

</div>
</body>
</html>
